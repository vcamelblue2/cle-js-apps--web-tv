function e(e,t,i,n){Object.defineProperty(e,t,{get:i,set:n,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},n={},s=t.parcelRequire190d;null==s&&((s=function(e){if(e in i)return i[e].exports;if(e in n){var t=n[e];delete n[e];var s={id:e,exports:{}};return i[e]=s,t.call(s.exports,s,s.exports),s.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},t.parcelRequire190d=s),s.register("e7lW4",function(t,i){e(t.exports,"CLE_FLAGS",function(){return s("4kMWh").CLE_FLAGS}),e(t.exports,"pass",function(){return s("4kMWh").pass}),e(t.exports,"f",function(){return s("4kMWh").f}),e(t.exports,"Use",function(){return s("4kMWh").Use}),e(t.exports,"Bind",function(){return s("4kMWh").Bind}),e(t.exports,"SmartAlias",function(){return s("4kMWh").SmartAlias}),e(t.exports,"LE_InitWebApp",function(){return s("4kMWh").LE_InitWebApp}),e(t.exports,"cle",function(){return s("4kMWh").cle}),e(t.exports,"str",function(){return s("4kMWh").str}),e(t.exports,"str_",function(){return s("4kMWh").str_}),e(t.exports,"html",function(){return s("4kMWh").html}),e(t.exports,"ComponentsRegistry",function(){return s("4kMWh").ComponentsRegistry}),s("4kMWh")}),s.register("4kMWh",function(t,i){e(t.exports,"CLE_FLAGS",function(){return r}),e(t.exports,"pass",function(){return d}),e(t.exports,"SmartAlias",function(){return C}),e(t.exports,"f",function(){return ea}),e(t.exports,"fArgs",function(){return el}),e(t.exports,"Use",function(){return w}),e(t.exports,"ComponentsRegistry",function(){return eH}),e(t.exports,"Placeholder",function(){return D}),e(t.exports,"Bind",function(){return G}),e(t.exports,"RenderApp",function(){return q}),e(t.exports,"LE_LoadCss",function(){return er}),e(t.exports,"LE_InitWebApp",function(){return eo}),e(t.exports,"cle",function(){return ed}),e(t.exports,"str",function(){return eh}),e(t.exports,"str_",function(){return ep}),e(t.exports,"input",function(){return ec}),e(t.exports,"clsIf",function(){return eu}),e(t.exports,"html",function(){return ef});var n=s("OHGR1");let r={LOG_DEBUG_ENABLED:!1,LOG_INFO_ENABLED:!1,LOG_WARNING_ENABLED:!0,PROPERTY_OPTIMIZATION:!0,REMOTE_HTML_V2_AUTOSTYLE:!0,COMPONENT_REGISTRY_BASE_HTML_EL:"div",DEFAULTS:{META:{FULL_OPTIMIZED:!1,PUSHBACK_AUTOMARK:!0}}},o={log:(...e)=>r.LOG_DEBUG_ENABLED&&console.log(...e)},a={log:(...e)=>r.LOG_INFO_ENABLED&&console.log(...e)},l={log:(...e)=>r.LOG_WARNING_ENABLED&&console.log(...e)},d=void 0,h=()=>void 0,p=(e,t,i)=>{Object.keys(e).forEach(n=>{i.includes(n)&&(t[n]=e[n])})},c=e=>{"function"==typeof e&&(e=e());let t="";return Object.keys(e).forEach(i=>{i.startsWith("::")?t+=i.substring(2)+":"+e[i]+";":t+=i.split(/(?=[A-Z])/).join("-").toLowerCase()+":"+e[i]+";"}),t},u=e=>e.split("-").map((e,t)=>0===t?e:e.charAt(0).toUpperCase()+e.substring(1)).join(""),m=e=>"function"==typeof e,_=(e,t)=>1===t.length?[e,t[0]]:_(e[t[0]],t.slice(1)),f=(e,t=[],i,n={expRetryObj:!0},s="",r=r,o,a,d=0)=>{try{n.result=e(...t),void 0!==o&&o(0===d,n.result)}catch(h){d<r?setTimeout(()=>f(e,t,i,n,s,r,o,a,d+1),Math.min(10*(d+1),r)):(l.log("CLE - WARNING! unable to execute after 5 retry! "+s),l.log(h),void 0!==a&&a(d,h,n.result))}return void 0!==i?i(()=>n.result):n},v=e=>{let t=k(e),{meta:i,...n}=e[t];return{[t]:n}};class g{constructor(e=()=>{},t=()=>{},i=()=>{},n,s,r){this.getter=e,this.setter=t,this.markAsChanged=i,this.cachingComparer="boolean"==typeof n&&!0===n?(e,t)=>e!==t:n,this.externalDeps=r,this.isExternal=void 0!==this.externalDeps&&this.externalDeps.length>0}}let C=(e,t)=>new g(ea(e,!0),el("v")("("+e+" = v)",!0),d,t),y=(e="",t="",i="",n={})=>{if(e.includes("=>"))return y(...e.split("=>").map(e=>e.trim()),i,n);let s={};return"string"==typeof t&&(t=t.split(",").map(e=>e.trim())),t.forEach(t=>{var r;s["let_"+i+t]=new g(ea("@"+e+"."+t,!0),el("v")("{ @"+e+"."+t+" = v; $._mark_"+e+"_as_changed(); return v }",!0),d,null===(r=n[t])||void 0===r||r)}),s};class b extends g{}let E=(e,t=()=>{},i=()=>{},n=()=>{},s,r)=>{if(!Array.isArray(e)&&e instanceof x){let i=e;t=$=>i.value,e=[e]}return new b(t,i,n,s,r,e)},O=e=>e instanceof b;class x{init(e,t,i,n){this.isAlias=e instanceof g,this.hasExternalDeps=this.isAlias&&void 0!==e.externalDeps&&e.externalDeps.length>0,this.oj_valueFunc=e,this.isAlias&&(e=e.getter),this.isFunc=m(e),this.setupRetriverFunc(),this._onGet=t,this._onSet=i,this._onDestroy=n,this._latestResolvedValue=void 0,this._valueFunc=e,this.__analyzeAndConnectDeps(),this.mustRetriveRealValue=!0,this.lastRetrivedRealValue=void 0;try{this._latestResolvedValue=this.__getRealVaule()}catch{}}__analyzeAndConnectDeps(){this.registeredDependency.forEach(e=>e()),this.registeredDependency=[],this.dependency=void 0,this.isFunc&&(this.dependency=W(this._valueFunc),a.log("analysis - dependency: ",this,this.dependency),this.registeredDependency=this.registerToDepsHelper(this,this.dependency,this.hasExternalDeps?this.oj_valueFunc.externalDeps:void 0))}destroy(e=!1){if(this.init(void 0,void 0,void 0),this.registerToDepsHelper=void 0,e)return this.removeAllOnChengedHandler();this._onDestroy&&this._onDestroy()}__getRealVaule(){return this.retriver_func()}get value(){try{this._onGet()}catch(e){l.log("CLE - WARNING: the onGet is undefined! (ERROR)",e,this)}return this.__getRealVaule()}set value(e){if(this.mustRetriveRealValue=!0,this.lastRetrivedRealValue=void 0,void 0===this._onSet){l.log("CLE - WARNING: the onSet is undefined! (ERROR)",this);return}if(O(e)&&(this.init(e,this._onGet,this._onSet,this._onDestroy),e=e.getter),this.isAlias)this.oj_valueFunc.setter(...this.executionContext.map(e=>e()),e),this.hasExternalDeps&&(o.log("fire use ext changed!!"),this.fireOnChangedSignal());else{this.isFunc=m(e),this.setupRetriverFunc(),this._valueFunc=e,this.__analyzeAndConnectDeps();let t=this.__getRealVaule();this._onSet(t,e,this),this.fireOnChangedSignal(),this._latestResolvedValue=t}}setupRetriverFunc(){r.PROPERTY_OPTIMIZATION?this.isFunc?this.retriver_func=()=>(this.mustRetriveRealValue&&(this.lastRetrivedRealValue=this._valueFunc(...this.executionContext.map(e=>e())),this.mustRetriveRealValue=!1),this.lastRetrivedRealValue):this.retriver_func=()=>this._valueFunc:this.retriver_func=this.isFunc?()=>this._valueFunc(...this.executionContext.map(e=>e())):()=>this._valueFunc}markAsChanged(){if(o.log("marked as changed!",this),this.mustRetriveRealValue=!0,this.lastRetrivedRealValue=void 0,void 0===this._onSet){l.log("CLE - WARNING: the onSet is undefined!",this);return}this.isAlias&&this.oj_valueFunc.markAsChanged(...this.executionContext.map(e=>e()));let e=this.__getRealVaule();this._onSet(e,this._valueFunc,this),this.isAlias&&void 0!==this.oj_valueFunc.cachingComparer?this.oj_valueFunc.cachingComparer(e,this._latestResolvedValue)?(this.fireOnChangedSignal(),this._latestResolvedValue=e):o.log("cached!"):(this.fireOnChangedSignal(),this._latestResolvedValue=e)}fireOnChangedSignal(){let e=this.__getRealVaule();this.onChangedHandlers.forEach(t=>t.handler(e,this._latestResolvedValue))}hasOnChangedHandler(e){return void 0!==this.onChangedHandlers.find(t=>t.who===e)}addOnChangedHandler(e,t){return this.hasOnChangedHandler(e)||this.onChangedHandlers.push({who:e,handler:t}),()=>this.removeOnChangedHandler(e)}removeOnChangedHandler(e){this.onChangedHandlers=this.onChangedHandlers.filter(t=>t.who!==e)}removeAllOnChengedHandler(){let e=this.onChangedHandlers;return this.onChangedHandlers=[],e}isCachable(){return this.isAlias&&void 0!==this.oj_valueFunc.cachingComparer}isCacheInvalid(e){return this.oj_valueFunc.cachingComparer(e,this._latestResolvedValue)}get asFunctions(){return[this,()=>this.value,e=>{this.value=e}]}constructor(e,t,i,n,s,r,o=!0){this.executionContext=(Array.isArray(s)?s:[s]).map(e=>m(e)?e:()=>e),this.registerToDepsHelper=r,this.onChangedHandlers=[],this.dependency=void 0,this.registeredDependency=[],this.mustRetriveRealValue=!0,this.lastRetrivedRealValue=void 0,this.setupRetriverFunc(),o&&this.init(e,t,i,n)}}class R{emit(...e){this.handlers.forEach(t=>t.handler(...e))}emitWaitResp(...e){return this.handlers.map(t=>t.handler(...e))}emitWaitFirstToResp(...e){for(let t of this.handlers){let i=t.handler(...e);if(void 0!==i)try{return{consumer:t.who.$this,response:i}}catch{return{consumer:t.who,response:i}}}}emitWaitRespCondition(e,...t){for(let i of this.handlers){let n=i.handler(...t);if(e(n))try{return{consumer:i.who.$this,response:n}}catch{return{consumer:i.who,response:n}}}}awaitSignalFired(e,t=()=>!0,i){let n;let s=()=>{void 0!==i&&(clearTimeout(n),n=void 0)};return new Promise((r,o)=>{i&&(n=setTimeout(()=>{o({error:"TIMEOUT"})},i)),this.addHandler(e,(...i)=>{(void 0===t||t(...i))&&(s(),this.removeHandler(e),r(...i))})})}hasHandler(e){return void 0!==this.handlers.find(t=>t.who===e)}addHandler(e,t){return this.hasHandler(e)||this.handlers.push({who:e,handler:t}),()=>this.removeHandler(e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t.who!==e)}destroy(){let e=this.handlers.map(e=>e.who);return this.handlers=[],e}constructor(e,t){this.name=e,this.definition=t,this.handlers=[]}}(0,n._)(R,"getSignalProxy",e=>({emit:(...t)=>e.emit(...t),emitWaitResp:(...t)=>e.emitWaitResp(...t),emitWaitFirstToResp:(...t)=>e.emitWaitFirstToResp(...t),emitWaitRespCondition:(t,...i)=>e.emitWaitRespCondition(t,...i),emitLazy:(t=1,...i)=>setTimeout(()=>{e.emit(...i)},t),subscribe:(t,i)=>e.addHandler(t,i),unsubscribe:t=>e.removeHandler(t),signalFired:async(t=()=>!0,i)=>await e.awaitSignalFired({},t,i)}));class A{hasSignal(e){return void 0!==this.signals[e]}addSignal(e,t){return!this.hasSignal(e)&&(this.signals[e]=new R(e,t),this.proxy[e]=R.getSignalProxy(this.signals[e]),this.handlersToRegister[e]&&(Object.values(this.handlersToRegister[e]).forEach(({who:t,handler:i})=>{this.addSignalHandler(e,t,i)}),this.handlersToRegister[e]=void 0)),this.signals[e]}addSignalHandler(e,t,i){return this.hasSignal(e)?this.signals[e].addHandler(t,i):(void 0===this.handlersToRegister[e]&&(this.handlersToRegister[e]=[]),this.handlersToRegister[e].push({who:t,handler:i})),()=>this.signals[e].removeHandler(t)}getProxy(){return this.proxy}constructor(){this.signals={},this.handlersToRegister={},this.proxy={newSignal:(e,t="stream => void")=>this.addSignal(e,t),subscribe:(e,t,i)=>this.addSignalHandler(e,t,i),unsubscribe:(e,t)=>this.signals[e].removeHandler(t)}}}let w=(e,t,{strategy:i="merge",init:n,passed_props:s,inject:r}={},o=[])=>new H(e,t,{strategy:i,init:n,passed_props:s,inject:r},o);class H{_resolveComponentRedefinition(){let e=k(this.component),t=Object.assign({},this.component[e]);if(void 0!==this.redefinitions){if("override"===this.strategy)t={...t,...this.redefinitions};else if("merge"===this.strategy){let i=[],n=["id","ctx_id","ctx_ref_id","constructor","beforeInit","onInit","afterChildsInit","afterInit","onUpdate","onDestroy","oos"],s=["signals","dbus_signals","data","private:data","props","private:props","let","alias","handle","when"],r=["s_css"],o=["on","on_s","on_a"],d=["def","private:def"],h=["let_","on_"];Object.entries(this.redefinitions).forEach(([e,a])=>{n.includes(e)?t[e]=a:s.includes(e)?(e in t?t[e]={...t[e]}:t[e]={},Object.entries(a).forEach(([i,n])=>{t[e][i]=n})):r.includes(e)?(e in t?t[e]={...t[e]}:t[e]={},Object.entries(a).forEach(([i,n])=>{let s=t[e][i];void 0!==s&&n[0]===j&&(n=[...s,...n]),t[e][i]=n.filter(e=>e!==j)})):o.includes(e)?(e in t?t[e]={...t[e]}:t[e]={},Object.entries(a).forEach(([i,n])=>{void 0===t[e]||i in t[e]?t[e][i]={...t[e][i]}:t[e][i]={},Object.entries(n).forEach(([n,s])=>{t[e][i][n]=s})})):d.includes(e)?(e in t?t[e]={...t[e]}:t[e]={},Object.entries(a).forEach(([i,n])=>{"function"==typeof n?t[e][i]=n:(void 0===t[e]||i in t[e]?t[e][i]={...t[e][i]}:t[e][i]={},Object.entries(n).forEach(([n,s])=>{t[e][i][n]=s}))})):i.includes(e)?l.log("CLE - WARNING!",e,"cannot be redefined!"):(h.map(t=>e.startsWith(t)).includes(!0)||l.log("CLE - WARNING! ACTUALLY",e,"is not supported in merge strategy! i simply FULL override it! assuming you can control the amount of override.."),t[e]=a)}),a.log("RESOLVED!",this.component[e],this.redefinitions,t)}}let i=this.inject||{},n=(e,t=0)=>{if("function"==typeof e||"string"==typeof e||e instanceof H)return e;{let s=k(e),r=e[s];if(eH.has(s))return e;if("function"==typeof r||"string"==typeof r||Array.isArray(r))return(Array.isArray(r)&&(r=r.map(e=>n(e,t+1))),0===t&&this.extraChilds.length>0)?Array.isArray(r)?{[s]:[...r,...this.extraChilds]}:{[s]:[r,...this.extraChilds]}:{[s]:r};let o=Object.assign({},e[s]),a=T(o);return null!==a&&(Array.isArray(o[a])?o[a]=[...o[a]]:o[a]=[o[a]],o[a]=o[a].map(e=>e instanceof I?e.getCheckedComponent(i[e.name]):n(e,t+1)).filter(e=>void 0!==e)),0===t&&this.extraChilds.length>0&&(null!==a?o[a]=[...o[a],...this.extraChilds]:o[L[0]]=[...this.extraChilds]),{[s]:o}}};return n({[e]:t})}cloneWithoutMeta(){let e;if(void 0!==this.redefinitions){let{meta:t,...i}=this.redefinitions;e=i}return new H(v(this.component),e,{strategy:this.strategy,init:this.init,passed_props:this.passed_props,inject:this.inject},this.extraChilds)}constructor(e,t,{strategy:i="merge",init:n,passed_props:s,inject:r}={},o=[]){this.component=e,this.init=n,this.passed_props=s,this.redefinitions=t,this.strategy=i,this.inject=r,this.extraChilds=Array.isArray(o)?o:[o],this.computedTemplate=this._resolveComponentRedefinition()}}let P=(...e)=>w(...e).computedTemplate;class S{build(e){let{prop:t,signal:i}=this.extractor.bind(void 0,e)();return{getter:E(t),setter:$=>e=>{t.value=e},signal:i}}constructor(e){e.includes(".")?this.extractor=$=>{let t=e.split("."),i=$;return e="",t.forEach((n,s)=>{0===s||(s===t.length-1?e=n:s<t.length-1&&(i=i[n]))}),{prop:i.getAsExternalProperty(e),signal:i.getAsExternalSignal(e+"Changed")}}:this.extractor=$=>({prop:$.getAsExternalProperty(e),signal:$.getAsExternalSignal(e+"Changed")})}}let j={},D=(e,{default_component:t,must_be_redefined:i=!1,forced_id:n,forced_ctx_id:s,replace_if_different:r=!0}={})=>new I(e,{default_component:t,must_be_redefined:i,forced_id:n,forced_ctx_id:s,replace_if_different:r});class I{getCheckedComponent(e){if(void 0===e){if(this.must_be_redefined)throw Error("Injected Component (Placeholder repl) must be redefined by contract!");return this.default_component}if("function"==typeof e||"string"==typeof e||e instanceof H)return e;let[t,i]=Object.entries(e)[0];if(!1!==this.replace_if_different)return{[t]:{...i,id:this.forced_id||i.id,ctx_id:this.forced_ctx_id||i.ctx_id}};if((void 0===this.forced_id||i.id===this.forced_private_id)&&(void 0===this.forced_ctx_id||i.ctx_id===this.forced_ctx_id))return e;throw Error("Injected Component (Placeholder repl) must have specific ID by contract")}constructor(e,{default_component:t,must_be_redefined:i=!1,forced_id:n,forced_ctx_id:s,replace_if_different:r=!0}={}){this.name=e,this.default_component=t,this.must_be_redefined=i,this.forced_id=n,this.forced_ctx_id=s,this.replace_if_different=r}}let L=["","=>","text","_",">>","view","contains","childs"],T=e=>{for(let t of L)if(t in e)return t;return null},k=e=>{e instanceof H&&(e=e.computedTemplate);let t=Object.entries(e);if(a.log(e,t),t.length>1)throw Error();let[i,n]=t[0];return i},W=(e,t=!1)=>{let i,n=t?e.getter.toString():e.toString(),s=n.match(/\$.this\.([_$a-zA-Z]+[0-9]*[.]?)+/g);s=null==s?void 0:s.map(e=>e.replace("$.this.","").split(".")[0]);let r=n.match(/\$.parent\.([_$a-zA-Z]+[0-9]*[.]?)+/g);r=null==r?void 0:r.map(e=>e.replace("$.parent.","").split(".")[0]);let o=n.match(/\$.scope\.([_$a-zA-Z]+[0-9]*[.]?)+/g);o=null==o?void 0:o.map(e=>e.replace("$.scope.","").split(".")[0]);let a=n.match(/\$.le\.([_$a-zA-Z]+[0-9]*[.]?)+/g);a=null==a?void 0:a.map(e=>e.replace("$.le.","").split(".").slice(0,2));let l=n.match(/\$.ctx\.([_$a-zA-Z]+[0-9]*[.]?)+/g);l=null==l?void 0:l.map(e=>e.replace("$.ctx.","").split(".").slice(0,2));let d=n.match(/\$.ref\.([_$a-zA-Z]+[0-9]*[.]?)+/g);d=null==d?void 0:d.map(e=>e.replace("$.ref.","").split(".").slice(0,2));let h=n.match(/\$.meta\.([_$a-zA-Z]+[0-9]*[.]?)+/g);h=null==h?void 0:h.map(e=>e.replace("$.meta.","").split(".")[0]);let p=n.match(/\$.([_$a-zA-Z]+[0-9]*[.]?)+/g);return null==p||p.map(e=>e.split(".").filter(e=>"$"!==e)).forEach(e=>{["oos","this","parent","scope","le","ctx","ref","meta","u"].includes(e[0])||(void 0!==o?o.push(e[0]):o=[e[0]])}),t&&(i=[...e.externalDeps]),{$this_deps:s,$parent_deps:r,$scope_deps:o,$le_deps:a,$ctx_deps:l,$ref_deps:d,$meta_deps:h,$external_deps:i}},z=(e,t=0)=>new Proxy(e,{get:(e,t,i)=>{let n=e[t];return n instanceof x?n.value:n},set:function(e,t,i){let n=e[t];if(n instanceof x)return n.value=i,!0}}),M=(e,t=0)=>new Proxy(e,{get:(e,t,i)=>{if(t in e){let i=e[t];return i instanceof x?i.value:i}if(void 0!==e.scope&&t in e.scope)return e.scope[t];throw Error("Property Not Found")},set:function(e,t,i){if(t in e){let n=e[t];if(n instanceof x)return n.value=i,!0}else if(void 0!==e&&t in e.scope)return e.scope[t]=i,!0;else throw Error("Property Not Found")}}),N=e=>{let t=(e,i,n=0,s=!1)=>{if(0===n&&(s=e.meta_options.noMetaInScope),void 0===e||void 0===e.$this)return{};if(0===n&&e.meta_options.noThisInScope)return t(e.parent,i,n+1,s);if(i in(e.properties||{}))return e.properties;if(!s&&i in(e.meta||{}))return e.meta;if(!e.meta_options.isNewScope)return t(e.parent,i,n+1,s);throw Error("Properties cannot be found in this scope..blocked scope?")};return new Proxy({},{has:(i,n)=>(i=t(e,n),n in i),get:(i,n,s)=>{let r=t(e,n)[n];return r instanceof x?r.value:r},set:function(i,n,s){let r=t(e,n)[n];if(r instanceof x)return r.value=s,!0}})},F=e=>{let t=(e,i,n=0)=>{var s;return void 0===e?{}:i in((null===(s=e.convertedDefinition)||void 0===s?void 0:s.childsRef)||{})?e.childsRefPointers:t(e.parent,i,n+1)};return new Proxy({},{get:(i,n,s)=>{let r=t(e,n)[n];return Array.isArray(r)?r.map(e=>e.$this.this):r.$this.this},set:function(e,t,i){}})};class V{constructor(){this.proxy=new Proxy(this,{get:function(e,t,i){return e[t].$this.this}})}}class B{constructor(e,t,i){this.bindFunc=e,this.remap=t,this.event=i}}let U=(e,{remap:t,event:i}={})=>new B(e,t,i),G=(e,...t)=>m(e)?U(e,...t):"string"==typeof e?C(e,...t):void 0;class Z{static generate(){return this.__counter>=Number.MAX_SAFE_INTEGER&&(this.__counter=0,this.__modifier_on_max+="-"),"t-le-id-"+this.__counter+++this.__modifier_on_max}static reset(){this.__counter=0}}(0,n._)(Z,"__counter",0),(0,n._)(Z,"__modifier_on_max","");class Y{static generate(){return this.__counter>=Number.MAX_SAFE_INTEGER&&(this.__counter=0,this.__modifier_on_max+="-"),"cle-"+this.__counter+++this.__modifier_on_max}static reset(){this.__counter=0}}(0,n._)(Y,"__counter",0),(0,n._)(Y,"__modifier_on_max","");let q=(e,t)=>{let i=new J(e,t);return i.initAndRenderize(),i},K=(e,t,i,...n)=>{let s=t(e.$this.this,i,...n);Array.isArray(s)||(s=[s]);let r=s.map(t=>Q.componentFactory(e,t,e.$le,e.$dbus));return r.map(e=>e.buildSkeleton()),r.map(e=>e.create()),r};class J{initAndRenderize(){this.buildSkeleton(),this.components_root.create()}buildSkeleton(){this.components_root=Q.componentFactory(this.html_root,this.oj_definition,this.$le,this.$dbus),this.components_root.buildSkeleton()}destroy(){this.components_root.destroy()}constructor(e,t){(0,n._)(this,"html_root",void 0),(0,n._)(this,"oj_definition",void 0),(0,n._)(this,"components_root",void 0),(0,n._)(this,"$le",void 0),(0,n._)(this,"$dbus",void 0),(0,n._)(this,"$cssEngine",void 0),this.html_root=e,this.oj_definition=t,this.$le=new V,this.$dbus=new A}}class Q{getMy$ctx(){var e;return this.isA$ctxComponent?null!==(e=this.$ctx)&&void 0!==e?e:new V:void 0!==this.parent&&this.parent instanceof Q?this.parent.getMy$ctx():void 0}getMy$ctxRoot(){return this.isA$ctxComponent?this:void 0!==this.parent&&this.parent instanceof Q?this.parent.getMy$ctxRoot():void 0}getMy$ctxParentRoot(){if(void 0!==this.parent&&this.parent instanceof Q)return this.getMy$ctxRoot().parent.getMy$ctxRoot()}getMyFullMeta(){return this.isMyParentHtmlRoot?this.meta:this.meta_options.isNewScope?(a.log("Component meta blocked scope:",this.meta,this.oj_definition,this),this.meta):void 0!==this.parent&&this.parent instanceof Q?{...this.parent.getMyFullMeta(),...this.meta}:{}}getMy$meta(){return this.isMyParentHtmlRoot?(a.log("Component meta:",this.meta,this.oj_definition,this),z(this.meta)):this.meta_options.isNewScope?(a.log("Component meta blocked scope:",this.meta,this.oj_definition,this),z(this.meta)):void 0!==this.parent&&this.parent instanceof Q?(a.log("Parernt meta:",this.parent.meta,this.oj_definition,this),z(this.getMyFullMeta())):void 0}get$ScopedPropsOwner(e,t=0,i=!1,n=!1){if(0===t&&(i=this.meta_options.noMetaInScope),void 0===this.parent||!(this.parent instanceof Q))return[this,!0];if(0===t&&this.meta_options.noThisInScope)return this.parent.get$ScopedPropsOwner(e,t+1,i,n);if(e in this.properties||n&&e in this.signals)return[this,!0];if(!i&&e in this.meta)return[this,!1];if(!this.meta_options.isNewScope)return this.parent.get$ScopedPropsOwner(e,t+1,i,n);throw Error("Properties cannot be found in this scope..blocked scope?")}get$ScopedSignalOwner(e,t=0){if(void 0===this.parent||!(this.parent instanceof Q))return[this,!0];if(0===t&&this.meta_options.noThisInScope)return this.parent.get$ScopedSignalOwner(e,t+1);if(e in this.signals)return[this,!0];if(!this.meta_options.isNewScope)return this.parent.get$ScopedSignalOwner(e,t+1);throw Error("Signal cannot be found in this scope..blocked scope?")}defineAndRegisterId(){this.id=this.convertedDefinition.id,this.ctx_id=this.convertedDefinition.ctx_id,this.ctx_ref_id=this.convertedDefinition.ctx_ref_id,void 0!==this.id&&(this.$le[this.id]=this,this.$ctx[this.id]=this),void 0!==this.ctx_id&&(this.$ctx[this.ctx_id]=this),this.isMyParentHtmlRoot&&(this.$le.root=this),this.isA$ctxComponent&&(this.$ctx.root=this),this.isA$ctxComponent&&!this.isMyParentHtmlRoot&&void 0!==this.ctx_ref_id&&(this.parent.$ctx[this.ctx_ref_id]=this)}buildSkeleton(){this.buildHtmlPointerElement(),this.buildPropertiesRef(),this.buildChildsSkeleton()}buildHtmlPointerElement(){if(this.isObjComponent)this.html_pointer_element=document.createElement("leobj"),this.meta_options.hasViewChilds&&(this.isMyParentHtmlRoot?this.parent.appendChild(this.html_pointer_element):this.parent.html_pointer_element.appendChild(this.html_pointer_element));else if(this.isPlaceholderPointerComponent){this.html_pointer_element=document.createComment("cleptr"),this.isMyParentHtmlRoot?this.parent.appendChild(this.html_pointer_element):this.parent.html_pointer_element.appendChild(this.html_pointer_element);return}else this.html_pointer_element=document.createElement(this.htmlElementType),this.isMyParentHtmlRoot?this.parent.appendChild(this.html_pointer_element):this.parent.html_pointer_element.appendChild(this.html_pointer_element);this.html_pointer_element.setAttribute(this.t_uid,"")}buildChildsSkeleton(){var e;this.childs=(null===(e=this.convertedDefinition.childs)||void 0===e?void 0:e.map(e=>Q.componentFactory(this,e,this.$le,this.$dbus)))||[],this.childs.forEach(e=>e.buildSkeleton())}buildPropertiesRef(){var e,t;this.properties.el=this.html_pointer_element,this.properties.parent=null===(e=this.parent)||void 0===e?void 0:null===(t=e.$this)||void 0===t?void 0:t.this,this.properties.comp_id=this.id,this.properties.comp_ctx_id=this.ctx_id,this.properties.comp_ctx_ref_id=this.ctx_ref_id,this.properties.t_uid=this.t_uid,this.properties.getOos=()=>this.$oos,this.properties.getAsExternalProperty=e=>{let t=this.properties[e];if(t instanceof x)return t},this.properties.getAsExternalSignal=e=>{let t=this.signals[e];if(t instanceof R)return R.getSignalProxy(t)},this.properties.subscribe=(e,t,i,n=!1)=>{if(e in this.signals)return this.signals[e].addHandler(t,i);if(e.includes(".")){if(e.startsWith("dbus."))return this.$dbus.addSignalHandler(e.slice(5),t,i);if(e.startsWith("le.")){let[n,s,r]=e.split(".");return this.$le[s].signals[r].addHandler(t,i)}if(e.startsWith("ctx.")){let[n,s,r]=e.split(".");return this.$ctx[s].signals[r].addHandler(t,i)}if(e.startsWith("ref.")){let[n,s,r]=e.split("."),o=this.getChildsRefOwner(s).childsRefPointers[s];return Array.isArray(o)?o.map(e=>e.signals[r].addHandler(t,i)):o.signals[r].addHandler(t,i)}}else if(n){let[n,s]=this.get$ScopedSignalOwner(e);return n.signals[e].addHandler(t,i)}throw Error("Signal does not exists")},this.properties.subscribeAsync=async(e,t,i)=>new Promise((n,s)=>{let r=(o=0)=>{try{let s=this.signals[e].addHandler(t,i);n(s)}catch{o<5?setTimeout(()=>r(o++),Math.min(1*(o+1),5)):(l.log("CLE - WARNING! unable to subscribe to the signal!"),s("Signal does not exists"))}};r()}),this.properties.unsubscribe=(e,t,i=!1)=>{if(e in this.signals)this.signals[e].removeHandler(t);else if(e.includes(".")){if(e.startsWith("dbus."))return this.$dbus.signals[e.slice(5)].removeHandler(t);if(e.startsWith("le.")){let[i,n,s]=e.split(".");return this.$le[n].signals[s].removeHandler(t)}if(e.startsWith("ctx.")){let[i,n,s]=e.split(".");return this.$ctx[n].signals[s].removeHandler(t)}if(e.startsWith("ref.")){let[i,n,s]=e.split("."),r=this.getChildsRefOwner(n).childsRefPointers[n];return Array.isArray(r)?r.map(e=>e.signals[s].removeHandler(t)):r.signals[s].removeHandler(t)}}else if(i){let[i,n]=this.get$ScopedSignalOwner(e);return i.signals[e].removeHandler(t)}throw Error("Signal does not exists")},this.properties.editRefVal=new Proxy({},{get:(e,t)=>e=>{e(this.$this.this[t]),this.properties["_mark_"+t+"_as_changed"]()},set:function(){}}),this.properties.editArrRefVal=new Proxy({},{get:(e,t)=>e=>{e(this.$this.this[t]),this.$this.this[t]=[...this.$this.this[t]]},set:function(){}}),this.registerAsChildsRef(),this.$parent=this.parent instanceof Q?z(this.parent.properties):void 0,this.$scope=N(this),this.$ref=F(this),this.$this=M({this:z(this.properties),parent:this.$parent,scope:this.$scope,le:this.$le.proxy,ctx:this.$ctx.proxy,dbus:this.$dbus.proxy,meta:this.$meta,ref:this.$ref,oos:new Proxy({},{get:(e,t,i)=>this.$oos[t],set:(e,t,i)=>(this.$oos[t]=i,!0)}),u:this.getUtilsProxy()})}getUtilsProxy(){return z({newSignal:(e,t="stream => void")=>{let i=new R(e,t);this.signals[e]=i,this.properties[e]=R.getSignalProxy(i)},changed:((e,...t)=>{for(let i of t)e["_mark_"+i+"_as_changed"]()}).bind(void 0,this.$scope),propCondition:(e,t,i=e=>null!=e,n,s=5)=>{let r,o={},a=()=>{void 0!==n&&(clearTimeout(r),r=void 0)};return new Promise((l,h)=>{n&&(r=setTimeout(()=>{h({error:"TIMEOUT"})},n)),f(()=>{let n=e.bind(void 0,this.$this)();if(null==n)throw Error("Cannot Find Scope");{let e=n[t];if(m(i)&&i(e)||Array.isArray(i)&&i.includes(e))a(),l(e);else{let e=n.subscribe(t+"Changed",o,t=>{(m(i)&&i(t)||Array.isArray(i)&&i.includes(t))&&(e(),a(),l(t))})}}},d,d,d,"Cannot connect to CLE Prop",s,d,(...e)=>(a(),h(e)))})},signalFired:(e,t,i=e=>!0,n,s=5)=>new Promise((r,o)=>{f(()=>{let s=e.bind(void 0,this.$this)();if(null==s)throw Error("Cannot Find Scope");s[t].signalFired(i,n).then((...e)=>r(...e)).catch(e=>o(e))},d,d,d,"Cannot connect to CLE Signal",s,d,(...e)=>o(e))}),getCleElementByDom:e=>{if("string"==typeof e&&(e=document.querySelector(e)),null===e)throw Error("Null-Query-Sel");return Object.values(this.$le).find(t=>t instanceof Q&&t.html_pointer_element===e).$this.this},getCleElementsByDom:(...e)=>{if(1===e.length&&"string"==typeof e[0]&&(e=[...document.querySelectorAll(e)]),0===e.length)throw Error("Null-Query-Sel");return Object.values(this.$le).filter(t=>t instanceof Q&&e.includes(t.html_pointer_element)).map(e=>e.$this.this)},getChildsRef:e=>{let t=this.getChildsRefOwner(e);return Array.isArray(t.childsRefPointers[e])?t.childsRefPointers[e].map(e=>e.$this.this):t.childsRefPointers[e].$this.this},getSubChildRef:e=>{let t=[...this.childs];for(let i of t)try{if(i instanceof Q){if(i.convertedDefinition.name===e)return i.$this.this;i.childs.forEach(e=>t.push(e))}else i instanceof en&&i.childs.forEach(e=>t.push(e))}catch{}return null},getSubChildsRef:(e,t=0)=>{let i=[...this.childs],n=[];for(let s of i)try{if(s instanceof Q){if(s.convertedDefinition.name===e){if(n.push(s.$this.this),t>0&&n.length>=t)break}else s.childs.forEach(e=>i.push(e))}else s instanceof en&&s.childs.forEach(e=>i.push(e))}catch{}return n},lazyRender:(e,{afterCreate:t,beforeDestroy:i,afterDestroy:n,auto:s=!1}={},...r)=>{s&&this.destroyDynamicChilds(void 0,!1,!1),i&&(this.dynamicChildsBeforeDestroy=i),n&&(this.dynamicChildsBeforeDestroy=n);let o=K(this,e,this.dynamicChildsState,...r);return this.dynamicChilds=this.dynamicChilds.concat(o),void 0!==t&&setTimeout(()=>{t()},10),o.map(e=>e.$this)},getLazyRenderState:()=>this.dynamicChildsState,clearLazyRender:(e,t=!1,i=!1)=>{this.destroyDynamicChilds(e,t,i)},newConnectedSubRenderer:(e,t,i=!1,n="append")=>(void 0===e&&(e=this.html_pointer_element),ee.SubRendererComponentFactory(this,e,t,i,n))})}getChildsRefOwner(e){return e in(this.convertedDefinition.childsRef||{})?this:this.isMyParentHtmlRoot?void 0:this.parent.getChildsRefOwner(e)}registerAsChildsRef(){let e=this.convertedDefinition.name;if(void 0!==e){let t=this.getChildsRefOwner(e);void 0!=t?void 0===t.childsRefPointers[e]?t.childsRefPointers[e]="multi"===t.convertedDefinition.childsRef[e]?[this]:this:t.childsRefPointers[e]=Array.isArray(t.childsRefPointers[e])?[...t.childsRefPointers[e],this]:this:l.log("CLE Warning - Cannot find a ref owner")}}unregisterAsChildsRef(){let e=this.convertedDefinition.name;if(void 0!==e){let t=this.getChildsRefOwner(e);void 0!==t?void 0!==t.childsRefPointers[e]&&(t.childsRefPointers[e]=Array.isArray(t.childsRefPointers[e])?t.childsRefPointers[e].filter(e=>e!==this):void 0):l.log("CLE Warning - Cannot find a ref owner")}}create(){if(void 0!==this.convertedDefinition.checked_deps&&Object.entries(this.convertedDefinition.checked_deps).forEach(([e,t])=>{for(let i of t)if(!(i in this.$this[e]))throw Error(`Unsatisfied Dep! ${e}: ${i}`)}),void 0!==this.convertedDefinition.oos&&(this.$oos=m(this.convertedDefinition.oos)?this.convertedDefinition.oos.bind(this.$this,this.$this)():this.convertedDefinition.oos),void 0!==this.convertedDefinition.handle&&Object.entries(this.convertedDefinition.handle).forEach(([e,t])=>{if(m(t))this.html_pointer_element[e]=(...e)=>t.bind(void 0,this.$this,...e)(),this.handlerRemover.push(()=>{this.html_pointer_element[e]=void 0});else if("object"==typeof t){let i=t.if,n=t.use,s=t.else_use;if(void 0!==i){let t=()=>{this.html_pointer_element[e]=void 0},r=void 0===s?t=>{t?this.html_pointer_element[e]=(...e)=>n.bind(void 0,this.$this,...e)():this.html_pointer_element[e]=void 0}:t=>{t?this.html_pointer_element[e]=(...e)=>n.bind(void 0,this.$this,...e)():this.html_pointer_element[e]=(...e)=>s.bind(void 0,this.$this,...e)()},o=new x(d,d,d,d,()=>this.$this,(e,i)=>{var n,s,r,o,a,l;let h=[];return null===(n=i.$this_deps)||void 0===n||n.forEach(i=>{var n;let s=null===(n=this.properties[i])||void 0===n?void 0:n.addOnChangedHandler(e,()=>e.markAsChanged());s&&h.push(()=>{s(),t()})}),null===(s=i.$parent_deps)||void 0===s||s.forEach(i=>{var n;let s=null===(n=this.parent.properties[i])||void 0===n?void 0:n.addOnChangedHandler(e,()=>e.markAsChanged());s&&h.push(()=>{s(),t()})}),null===(r=i.$scope_deps)||void 0===r||r.forEach(i=>{var n;let[s,r]=this.get$ScopedPropsOwner(i),o=null===(n=r?s.properties[i]:s.meta[i])||void 0===n?void 0:n.addOnChangedHandler(e,()=>e.markAsChanged());o&&h.push(()=>{o(),t()})}),null===(o=i.$le_deps)||void 0===o||o.forEach(i=>{let n;f(()=>{n=this.$le[i[0]].properties[i[1]].addOnChangedHandler(e,()=>e.markAsChanged())},d,d,d,"Cannot connect to CLE Obj by Id",5),h.push((...e)=>{n(...e),t()})}),null===(a=i.$ctx_deps)||void 0===a||a.forEach(i=>{let n;f(()=>{n=this.$ctx[i[0]].properties[i[1]].addOnChangedHandler(e,()=>e.markAsChanged())},d,d,d,"Cannot connect to CLE Obj by Ctx Id",5),h.push((...e)=>{n(...e),t()})}),null===(l=i.$ref_deps)||void 0===l||l.forEach(i=>{let n;f(()=>{let t=this.getChildsRefOwner(i[0]).childsRefPointers[i[0]];if(Array.isArray(t))throw Error("Cannot Bind to multi-ref child");n=t.properties[i[1]].addOnChangedHandler(e,()=>e.markAsChanged())},d,d,d,"Cannot connect to CLE Obj by Ref Name",5),h.push(()=>{n(),t()})}),h},!1);this.handlerRemover.push(()=>o.destroy(!0)),setTimeout(()=>{o.init(i,h,r),o.markAsChanged()},10)}}}),void 0!==this.convertedDefinition.when_event_listener&&Object.entries(this.convertedDefinition.when_event_listener).forEach(([e,t])=>{if("object"==typeof t){let{handler:i,options:n}=t,s=this.html_pointer_element.addEventListener(e,(...e)=>i.bind(void 0,this.$this,...e)(),n);this.handlerRemover.push(s)}else if("function"==typeof t){let i=this.html_pointer_element.addEventListener(e,(...e)=>t.bind(void 0,this.$this,...e)());this.handlerRemover.push(i)}}),void 0!==this.convertedDefinition.data&&(Object.entries(this.convertedDefinition.data).forEach(([e,t])=>{this.properties[e]=new x(d,d,d,d,()=>this.$this,(e,t,i=[])=>{var n,s,r,o,a,l;let h=[];return null===(n=t.$this_deps)||void 0===n||n.forEach(t=>{var i,n;let s=null===(i=this.properties[t])||void 0===i?void 0:null===(n=i.addOnChangedHandler)||void 0===n?void 0:n.call(i,e,()=>e.markAsChanged());s&&h.push(s)}),null===(s=t.$parent_deps)||void 0===s||s.forEach(t=>{var i;let n=null===(i=this.parent.properties[t])||void 0===i?void 0:i.addOnChangedHandler(e,()=>e.markAsChanged());n&&h.push(n)}),null===(r=t.$scope_deps)||void 0===r||r.forEach(t=>{var i;let[n,s]=this.get$ScopedPropsOwner(t),r=null===(i=s?n.properties[t]:n.meta[t])||void 0===i?void 0:i.addOnChangedHandler(e,()=>e.markAsChanged());r&&h.push(r)}),null===(o=t.$le_deps)||void 0===o||o.forEach(t=>{let i;f(()=>{i=this.$le[t[0]].properties[t[1]].addOnChangedHandler(e,()=>e.markAsChanged())},d,d,d,"Cannot connect to CLE Obj by Id",5),h.push((...e)=>i(...e))}),null===(a=t.$ctx_deps)||void 0===a||a.forEach(t=>{let i;f(()=>{i=this.$ctx[t[0]].properties[t[1]].addOnChangedHandler(e,()=>e.markAsChanged())},d,d,d,"Cannot connect to CLE Obj by Ctx Id",5),h.push((...e)=>i(...e))}),null===(l=t.$ref_deps)||void 0===l||l.forEach(t=>{let i;f(()=>{let n=this.getChildsRefOwner(t[0]).childsRefPointers[t[0]];if(Array.isArray(n))throw Error("Cannot Bind to multi-ref child");i=n.properties[t[1]].addOnChangedHandler(e,()=>e.markAsChanged())},d,d,d,"Cannot connect to CLE Obj by Ref Name",5),h.push(()=>i())}),null==i||i.forEach(t=>{let i=null==t?void 0:t.addOnChangedHandler(e,()=>e.markAsChanged());i&&h.push(i)}),h},!1);let i=e+"Changed";this.signals[i]=new R(i,"stream => (newValue: any, oldValue: any) - property change signal"),this.properties["_mark_"+e+"_as_changed"]=()=>this.properties[e].markAsChanged()}),a.log("Parsed data definition: ",this,this.signals,this.properties)),void 0!==this.convertedDefinition.signals&&(Object.entries(this.convertedDefinition.signals).forEach(([e,t])=>{let i=new R(e,t);this.signals[e]=i,this.properties[e]=R.getSignalProxy(i)}),a.log("Parsed signals definition: ",this,this.signals,this.properties)),void 0!==this.convertedDefinition.dbus_signals&&Object.entries(this.convertedDefinition.dbus_signals).forEach(([e,t])=>{this.$dbus.addSignal(e,t)}),void 0!==this.convertedDefinition.def&&Object.entries(this.convertedDefinition.def).forEach(([e,t])=>{if(m(t)){this.properties[e]=(...e)=>t.bind(void 0,this.$this,...e)();let i=W(t);this.defDeps[e]=i}else this.properties[e]={},Object.entries(t).forEach(([t,i])=>{this.properties[e][t]=(...e)=>i.bind(void 0,this.$this,...e)();let n=W(i);this.defDeps[e+"."+t]=n}),this.properties[e]=z(this.properties[e])}),[this.convertedDefinition.on,this.convertedDefinition.on_s].forEach(e=>{void 0!==e&&(a.log("Found on/on_s/on_a definition",this),Object.entries(e).forEach(([e,t])=>{"this"===e?Object.entries(t).forEach(([e,t])=>{let i=this.signals[e].addHandler(this,(...e)=>t.bind(void 0,this.$this,...e)());this.signalsHandlerRemover.push(i)}):"parent"===e?Object.entries(t).forEach(([e,t])=>{let i=this.parent.signals[e].addHandler(this,(...e)=>t.bind(void 0,this.$this,...e)());this.signalsHandlerRemover.push(i)}):"scope"===e?Object.entries(t).forEach(([e,t])=>{let i=this.get$ScopedPropsOwner(e,d,d,!0)[0].signals[e].addHandler(this,(...e)=>t.bind(void 0,this.$this,...e)());this.signalsHandlerRemover.push(i)}):"dbus"===e?Object.entries(t).forEach(([e,t])=>{let i=this.$dbus.addSignalHandler(e,this,(...e)=>t.bind(void 0,this.$this,...e)());this.signalsHandlerRemover.push(i)}):"le"===e?Object.entries(t).forEach(([e,i])=>{Object.entries(i).forEach(([i,n])=>{let s=(r=0)=>{try{let t=this.$le[e].signals[i].addHandler(this,(...e)=>n.bind(void 0,this.$this,...e)());this.signalsHandlerRemover.push(t)}catch{r<5?setTimeout(()=>s(r++),Math.min(1*(r+1),5)):l.log("CLE - WARNING! unable to connect to the signal! -> ",this,t)}};s()})}):"ctx"===e?Object.entries(t).forEach(([e,i])=>{Object.entries(i).forEach(([i,n])=>{let s=(r=0)=>{try{let t=this.$ctx[e].signals[i].addHandler(this,(...e)=>n.bind(void 0,this.$this,...e)());this.signalsHandlerRemover.push(t)}catch{r<5?setTimeout(()=>s(r++),Math.min(1*(r+1),5)):l.log("CLE - WARNING! unable to connect to the signal! -> ",this,t)}};s()})}):"ref"===e&&Object.entries(t).forEach(([e,i])=>{Object.entries(i).forEach(([i,n])=>{let s=(r=0)=>{try{let t=this.getChildsRefOwner(e).childsRefPointers[e];if(Array.isArray(t))t.forEach(e=>{let t=e.signals[i].addHandler(this,(...e)=>n.bind(void 0,this.$this,...e)());this.signalsHandlerRemover.push(t)});else{let t=this.getChildsRefOwner(e).childsRefPointers[e].signals[i].addHandler(this,(...e)=>n.bind(void 0,this.$this,...e)());this.signalsHandlerRemover.push(t)}}catch{r<5?setTimeout(()=>s(r++),Math.min(1*(r+1),5)):l.log("CLE - WARNING! unable to connect to the signal! -> ",this,t)}};s()})})}))}),void 0!==this.convertedDefinition.data&&Object.entries(this.convertedDefinition.data).forEach(([e,t])=>{this.properties[e].init(t,()=>o.log(e,"getted!"),(t,i,n)=>{o.log(e,"setted!",this),n.isCachable()?n.isCacheInvalid(t)&&this.signals[e+"Changed"].emit(t,this.properties[e]._latestResolvedValue):this.signals[e+"Changed"].emit(t,this.properties[e]._latestResolvedValue)}),o.log("Parser, data initialized: ",this,this.properties)}),void 0!==this.convertedDefinition.attrs){o.log("Found attrs: ",this.convertedDefinition.attrs);let e={};Object.entries(this.convertedDefinition.attrs).forEach(([t,i])=>{let n=t=>{if(o.log("Parsing attr: ",t,i),t.includes("."))l.log("CLE - WARNING! ATTRS does not support '.' property navigation!");else{var n,s,r,h,p,u,_,v,g,C,y,b,E,O,x,R,A,w,H,P,S,j,D;if("style"===t){let e=e=>"object"==typeof e?c(e):e,a=t=>{var i;let n=m(t)?t.bind(void 0,this.$this)():t;null==n?this.html_pointer_element.hasAttribute("style")&&this.html_pointer_element.removeAttribute("style"):this.html_pointer_element.setAttribute("style",e(n).toString()),null===(i=this.singlePropStyleRecomputeHooks)||void 0===i||i.forEach(e=>null==e?void 0:e())};if(m(i)){let e=W(i);o.log("Attr static deps analysis: ",e),null===(n=e.$this_deps)||void 0===n||n.forEach(e=>{var n;let s=null===(n=this.properties[e])||void 0===n?void 0:n.addOnChangedHandler([this,"attr",t],()=>a(i));s&&this.attrHattrRemover.push(s)}),null===(s=e.$parent_deps)||void 0===s||s.forEach(e=>{var n;let s=null===(n=this.parent.properties[e])||void 0===n?void 0:n.addOnChangedHandler([this,"attr",t],()=>a(i));s&&this.attrHattrRemover.push(s)}),null===(r=e.$scope_deps)||void 0===r||r.forEach(e=>{var n;let[s,r]=this.get$ScopedPropsOwner(e),o=null===(n=r?s.properties[e]:s.meta[e])||void 0===n?void 0:n.addOnChangedHandler([this,"attr",t],()=>a(i));o&&this.attrHattrRemover.push(o)}),null===(h=e.$le_deps)||void 0===h||h.forEach(e=>{let n;f(()=>{n=this.$le[e[0]].properties[e[1]].addOnChangedHandler([this,"attr",t],()=>a(i))},d,d,d,"Cannot connect to CLE Obj by Id",5,(e,t)=>{e||a(i)}),this.attrHattrRemover.push((...e)=>n(...e))}),null===(p=e.$ctx_deps)||void 0===p||p.forEach(e=>{let n;f(()=>{n=this.$ctx[e[0]].properties[e[1]].addOnChangedHandler([this,"attr",t],()=>a(i))},d,d,d,"Cannot connect to CLE Obj by Ctx Id",5,(e,t)=>{e||a(i)}),this.attrHattrRemover.push((...e)=>n(...e))}),null===(u=e.$ref_deps)||void 0===u||u.forEach(e=>{let n;f(()=>{let s=this.getChildsRefOwner(e[0]).childsRefPointers[e[0]];if(Array.isArray(s))throw Error("Cannot Bind to multi-ref child");n=s.properties[e[1]].addOnChangedHandler([this,"attr",t],()=>a(i))},d,d,d,"Cannot connect to CLE Obj by Ref Name",5,(e,t)=>{e||a(i)}),this.attrHattrRemover.push(()=>n())})}a(i)}else if(m(i)){let e=()=>{let e=i.bind(void 0,this.$this)();null==e?this.html_pointer_element.hasAttribute(t)&&this.html_pointer_element.removeAttribute(t):"class"===t&&Array.isArray(e)?this.html_pointer_element.setAttribute(t,e.filter(e=>"string"==typeof e).join(" ").toString()):this.html_pointer_element.setAttribute(t,e.toString())},n=W(i);o.log("Attr static deps analysis: ",n),null===(_=n.$this_deps)||void 0===_||_.forEach(i=>{var n;let s=null===(n=this.properties[i])||void 0===n?void 0:n.addOnChangedHandler([this,"attr",t],()=>e());s&&this.attrHattrRemover.push(s)}),null===(v=n.$parent_deps)||void 0===v||v.forEach(i=>{var n;let s=null===(n=this.parent.properties[i])||void 0===n?void 0:n.addOnChangedHandler([this,"attr",t],()=>e());s&&this.attrHattrRemover.push(s)}),null===(g=n.$scope_deps)||void 0===g||g.forEach(i=>{var n;let[s,r]=this.get$ScopedPropsOwner(i),o=null===(n=r?s.properties[i]:s.meta[i])||void 0===n?void 0:n.addOnChangedHandler([this,"attr",t],()=>e());o&&this.attrHattrRemover.push(o)}),null===(C=n.$le_deps)||void 0===C||C.forEach(i=>{let n;f(()=>{n=this.$le[i[0]].properties[i[1]].addOnChangedHandler([this,"attr",t],()=>e())},d,d,d,"Cannot connect to CLE Obj by Id",5,(t,i)=>{t||e()}),this.attrHattrRemover.push((...e)=>n(...e))}),null===(y=n.$ctx_deps)||void 0===y||y.forEach(i=>{let n;f(()=>{n=this.$ctx[i[0]].properties[i[1]].addOnChangedHandler([this,"attr",t],()=>e())},d,d,d,"Cannot connect to CLE Obj by Ctx Id",5,(t,i)=>{t||e()}),this.attrHattrRemover.push((...e)=>n(...e))}),null===(b=n.$ref_deps)||void 0===b||b.forEach(i=>{let n;f(()=>{let s=this.getChildsRefOwner(i[0]).childsRefPointers[i[0]];if(Array.isArray(s))throw Error("Cannot Bind to multi-ref child");n=s.properties[i[1]].addOnChangedHandler([this,"attr",t],()=>e())},d,d,d,"Cannot connect to CLE Obj by Ref Name",5,(t,i)=>{t||e()}),this.attrHattrRemover.push(()=>n())}),e()}else if(i instanceof B){a.log("Found HAttrBinding attr: ",t,i,this);let n=i;i=i.bindFunc;let s=()=>{let e=i.bind(void 0,this.$this)();e!==this.html_pointer_element[t]&&(this.html_pointer_element[t]=null==e?void 0:e.toString())},r=W(i);if(a.log("Attr static deps analysis: ",r),null===(E=r.$this_deps)||void 0===E||E.forEach(i=>{var n;let r=null===(n=this.properties[i])||void 0===n?void 0:n.addOnChangedHandler([this,"attr",t],()=>s());r&&this.attrHattrRemover.push(r),e[t]=()=>this.properties[i]}),null===(O=r.$parent_deps)||void 0===O||O.forEach(i=>{var n;let r=null===(n=this.parent.properties[i])||void 0===n?void 0:n.addOnChangedHandler([this,"attr",t],()=>s());r&&this.attrHattrRemover.push(r),e[t]=()=>this.parent.properties[i]}),null===(x=r.$scope_deps)||void 0===x||x.forEach(i=>{var n,r;let[o,a]=this.get$ScopedPropsOwner(i);if(a){let r=null===(n=o.properties[i])||void 0===n?void 0:n.addOnChangedHandler([this,"attr",t],()=>s());r&&this.attrHattrRemover.push(r),e[t]=()=>o.properties[i]}else{let n=null===(r=o.meta[i])||void 0===r?void 0:r.addOnChangedHandler([this,"attr",t],()=>s());n&&this.attrHattrRemover.push(n),e[t]=()=>o.meta[i]}}),null===(R=r.$le_deps)||void 0===R||R.forEach(i=>{let n;f(()=>{n=this.$le[i[0]].properties[i[1]].addOnChangedHandler([this,"attr",t],()=>s())},d,d,d,"Cannot connect to CLE Obj by Id",5,(e,t)=>{e||s()}),this.attrHattrRemover.push((...e)=>n(...e)),e[t]=()=>this.$le[i[0]].properties[i[1]]}),null===(A=r.$ctx_deps)||void 0===A||A.forEach(i=>{let n;f(()=>{n=this.$ctx[i[0]].properties[i[1]].addOnChangedHandler([this,"attr",t],()=>s())},d,d,d,"Cannot connect to CLE Obj by Ctx Id",5,(e,t)=>{e||s()}),this.attrHattrRemover.push((...e)=>n(...e)),e[t]=()=>this.$ctx[i[0]].properties[i[1]]}),null===(w=r.$ref_deps)||void 0===w||w.forEach(i=>{let n;f(()=>{let e=this.getChildsRefOwner(i[0]).childsRefPointers[i[0]];if(Array.isArray(e))throw Error("Cannot Bind to multi-ref child");n=e.properties[i[1]].addOnChangedHandler([this,"attr",t],()=>s())},d,d,d,"Cannot connect to CLE Obj by Ref Name",5,(e,t)=>{e||s()}),this.attrHattrRemover.push(()=>n()),e[t]=()=>this.getChildsRefOwner(i[0]).childsRefPointers[i[0]].properties[i[1]]}),("input"===this.htmlElementType||"div"===this.htmlElementType)&&["value","checked"].includes(t)){if(!["button","hidden","image","reset","submit","file"].includes(this.convertedDefinition.attrs.type)){a.log("Found 2 way binding",t,this);let i=i=>{a.log("2way binding changes handled!");let s=e[t](),r=void 0!==n.remap?n.remap.bind(void 0,this.$this)(i.target[t],i):i.target[t];s.value!==r&&(s.value=r)};a.log("2way Chose event: ",null!==(H=n.event)&&void 0!==H?H:"input",t,this),this.html_pointer_element.addEventListener(null!==(P=n.event)&&void 0!==P?P:"input",i),this.signalsHandlerRemover.push(()=>this.html_pointer_element.removeEventListener(null!==(S=n.event)&&void 0!==S?S:"input",i))}}else if("textarea"===this.htmlElementType);else if("select"===this.htmlElementType&&"value"===t&&void 0===this.convertedDefinition.attrs.multiple){let i=i=>{let s=e[t](),r=void 0!==n.remap?n.remap.bind(void 0,this.$this)(i.target[t],i):i.target[t];s.value!==r&&(s.value=r)};this.html_pointer_element.addEventListener(null!==(j=n.event)&&void 0!==j?j:"change",i),this.signalsHandlerRemover.push(()=>this.html_pointer_element.removeEventListener(null!==(D=n.event)&&void 0!==D?D:"change",i))}else this.htmlElementType;s()}else null==i?this.html_pointer_element.hasAttribute(t)&&this.html_pointer_element.removeAttribute(t):"class"===t&&Array.isArray(i)?this.html_pointer_element.setAttribute(t,i.filter(e=>"string"==typeof e).join(" ").toString()):this.html_pointer_element.setAttribute(t,i.toString())}};t.startsWith("@lazy:")?(a.log("Found lazy attr!"),setTimeout(()=>n(t.replace("@lazy:","")),10)):n(t)})}if(void 0!==this.convertedDefinition.hattrs){o.log("Found hattrs: ",this.convertedDefinition.hattrs);let e={};Object.entries(this.convertedDefinition.hattrs).forEach(([t,i])=>{let n=t=>{var n,s,r,l,h,p,c,u,v,g,C,y,b,E,O,x,R,A,w,H,P,S,j,D,I,L,T,k,z,M,N,F;if(o.log("Exec HAttr: ",t,i),t.includes(".")){if(m(i)){let e=()=>{let[e,n]=_(this.html_pointer_element,t.split(".")),s=i.bind(void 0,this.$this)();e[n]=s},o=W(i);a.log("HAttr static deps analysis: ",o),null===(n=o.$this_deps)||void 0===n||n.forEach(i=>{var n;let s=null===(n=this.properties[i])||void 0===n?void 0:n.addOnChangedHandler([this,"attr",t],()=>e());s&&this.attrHattrRemover.push(s)}),null===(s=o.$parent_deps)||void 0===s||s.forEach(i=>{var n;let s=null===(n=this.parent.properties[i])||void 0===n?void 0:n.addOnChangedHandler([this,"attr",t],()=>e());s&&this.attrHattrRemover.push(s)}),null===(r=o.$scope_deps)||void 0===r||r.forEach(i=>{var n;let[s,r]=this.get$ScopedPropsOwner(i),o=null===(n=r?s.properties[i]:s.meta[i])||void 0===n?void 0:n.addOnChangedHandler([this,"attr",t],()=>e());o&&this.attrHattrRemover.push(o)}),null===(l=o.$le_deps)||void 0===l||l.forEach(i=>{let n;f(()=>{n=this.$le[i[0]].properties[i[1]].addOnChangedHandler([this,"attr",t],()=>e())},d,d,d,"Cannot connect to CLE Obj by Id",5,(t,i)=>{t||e()}),this.attrHattrRemover.push((...e)=>n(...e))}),null===(h=o.$ctx_deps)||void 0===h||h.forEach(i=>{let n;f(()=>{n=this.$ctx[i[0]].properties[i[1]].addOnChangedHandler([this,"attr",t],()=>e())},d,d,d,"Cannot connect to CLE Obj by Ctx Id",5,(t,i)=>{t||e()}),this.attrHattrRemover.push((...e)=>n(...e))}),null===(p=o.$ref_deps)||void 0===p||p.forEach(i=>{let n;f(()=>{let s=this.getChildsRefOwner(i[0]).childsRefPointers[i[0]];if(Array.isArray(s))throw Error("Cannot Bind to multi-ref child");n=s.properties[i[1]].addOnChangedHandler([this,"attr",t],()=>e())},d,d,d,"Cannot connect to CLE Obj by Ref Name",5,(t,i)=>{t||e()}),this.attrHattrRemover.push(()=>n())}),e(),"style"===t.split(".")[0]&&(null===(c=this.singlePropStyleRecomputeHooks)||void 0===c||c.push(()=>e()))}else if(i instanceof B){a.log("Found binding hattr: ",t,i,this);let n=i;i=i.bindFunc;let s=()=>{let[e,n]=_(this.html_pointer_element,t.split(".")),s=i.bind(void 0,this.$this)();s!==this.html_pointer_element[t]&&(e[n]=s)},r=W(i);a.log("HAttr static deps analysis: ",r),null===(u=r.$this_deps)||void 0===u||u.forEach(i=>{var n;let r=null===(n=this.properties[i])||void 0===n?void 0:n.addOnChangedHandler([this,"attr",t],()=>s());r&&this.attrHattrRemover.push(r),e[t]=()=>this.properties[i]}),null===(v=r.$parent_deps)||void 0===v||v.forEach(i=>{var n;let r=null===(n=this.parent.properties[i])||void 0===n?void 0:n.addOnChangedHandler([this,"attr",t],()=>s());r&&this.attrHattrRemover.push(r),e[t]=()=>this.parent.properties[i]}),null===(g=r.$scope_deps)||void 0===g||g.forEach(i=>{var n,r;let[o,a]=this.get$ScopedPropsOwner(i);if(a){let r=null===(n=o.properties[i])||void 0===n?void 0:n.addOnChangedHandler([this,"attr",t],()=>s());r&&this.attrHattrRemover.push(r),e[t]=()=>o.properties[i]}else{let n=null===(r=o.meta[i])||void 0===r?void 0:r.addOnChangedHandler([this,"attr",t],()=>s());n&&this.attrHattrRemover.push(n),e[t]=()=>o.meta[i]}}),null===(C=r.$le_deps)||void 0===C||C.forEach(i=>{let n;f(()=>{n=this.$le[i[0]].properties[i[1]].addOnChangedHandler([this,"attr",t],()=>s())},d,d,d,"Cannot connect to CLE Obj by Id",5,(e,t)=>{e||s()}),this.attrHattrRemover.push((...e)=>n(...e)),e[t]=()=>this.$le[i[0]].properties[i[1]]}),null===(y=r.$ctx_deps)||void 0===y||y.forEach(i=>{let n;f(()=>{n=this.$ctx[i[0]].properties[i[1]].addOnChangedHandler([this,"attr",t],()=>s())},d,d,d,"Cannot connect to CLE Obj by Ctx Id",5,(e,t)=>{e||s()}),this.attrHattrRemover.push((...e)=>n(...e)),e[t]=()=>this.$ctx[i[0]].properties[i[1]]}),null===(b=r.$ref_deps)||void 0===b||b.forEach(i=>{let n;f(()=>{let e=this.getChildsRefOwner(i[0]).childsRefPointers[i[0]];if(Array.isArray(e))throw Error("Cannot Bind to multi-ref child");n=e.properties[i[1]].addOnChangedHandler([this,"attr",t],()=>s())},d,d,d,"Cannot connect to CLE Obj by Ref Name",5,(e,t)=>{e||s()}),this.attrHattrRemover.push(()=>n()),e[t]=()=>this.getChildsRefOwner(i[0]).childsRefPointers[i[0]].properties[i[1]]}),a.log("Exec 2 way bidning",t,this);let o=i=>{a.log("2way binding changes handled!");let s=e[t](),[r,o]=_(i.target,t.split(".")),l=void 0!==n.remap?n.remap.bind(void 0,this.$this)(r[o],i):r[o];s.value!==l&&(s.value=l)};a.log("Chosing event: ",null!==(E=n.event)&&void 0!==E?E:"input",t,this),this.html_pointer_element.addEventListener(null!==(O=n.event)&&void 0!==O?O:"input",o),this.signalsHandlerRemover.push(()=>this.html_pointer_element.removeEventListener(null!==(x=n.event)&&void 0!==x?x:"input",o)),s()}else{let e=()=>{let[e,n]=_(this.html_pointer_element,t.split("."));e[n]=i};e(),"style"===t.split(".")[0]&&(null===(R=this.singlePropStyleRecomputeHooks)||void 0===R||R.push(()=>e()))}}else if(m(i)){let e=()=>{this.html_pointer_element[t]=i.bind(void 0,this.$this)()},n=W(i);a.log("HAttr static deps analysis: ",n),null===(A=n.$this_deps)||void 0===A||A.forEach(i=>{var n;let s=null===(n=this.properties[i])||void 0===n?void 0:n.addOnChangedHandler([this,"attr",t],()=>e());s&&this.attrHattrRemover.push(s)}),null===(w=n.$parent_deps)||void 0===w||w.forEach(i=>{var n;let s=null===(n=this.parent.properties[i])||void 0===n?void 0:n.addOnChangedHandler([this,"attr",t],()=>e());s&&this.attrHattrRemover.push(s)}),null===(H=n.$scope_deps)||void 0===H||H.forEach(i=>{var n;let[s,r]=this.get$ScopedPropsOwner(i),o=null===(n=r?s.properties[i]:s.meta[i])||void 0===n?void 0:n.addOnChangedHandler([this,"attr",t],()=>e());o&&this.attrHattrRemover.push(o)}),null===(P=n.$le_deps)||void 0===P||P.forEach(i=>{let n;f(()=>{n=this.$le[i[0]].properties[i[1]].addOnChangedHandler([this,"attr",t],()=>e())},d,d,d,"Cannot connect to CLE Obj by Id",5,(t,i)=>{t||e()}),this.attrHattrRemover.push((...e)=>n(...e))}),null===(S=n.$ctx_deps)||void 0===S||S.forEach(i=>{let n;f(()=>{n=this.$ctx[i[0]].properties[i[1]].addOnChangedHandler([this,"attr",t],()=>e())},d,d,d,"Cannot connect to CLE Obj by Ctx Id",5,(t,i)=>{t||e()}),this.attrHattrRemover.push((...e)=>n(...e))}),null===(j=n.$ref_deps)||void 0===j||j.forEach(i=>{let n;f(()=>{let s=this.getChildsRefOwner(i[0]).childsRefPointers[i[0]];if(Array.isArray(s))throw Error("Cannot Bind to multi-ref child");n=s.properties[i[1]].addOnChangedHandler([this,"attr",t],()=>e())},d,d,d,"Cannot connect to CLE Obj by Ref Name",5,(t,i)=>{t||e()}),this.attrHattrRemover.push(()=>n())}),e()}else if(i instanceof B){a.log("Found binding hattr: ",t,i,this);let n=i;i=i.bindFunc;let s=()=>{let e=i.bind(void 0,this.$this)();e!==this.html_pointer_element[t]&&(this.html_pointer_element[t]=e)},r=W(i);a.log("hattr static deps analysis: ",r),null===(D=r.$this_deps)||void 0===D||D.forEach(i=>{var n;let r=null===(n=this.properties[i])||void 0===n?void 0:n.addOnChangedHandler([this,"attr",t],()=>s());r&&this.attrHattrRemover.push(r),e[t]=()=>this.properties[i]}),null===(I=r.$parent_deps)||void 0===I||I.forEach(i=>{var n;let r=null===(n=this.parent.properties[i])||void 0===n?void 0:n.addOnChangedHandler([this,"attr",t],()=>s());r&&this.attrHattrRemover.push(r),e[t]=()=>this.parent.properties[i]}),null===(L=r.$scope_deps)||void 0===L||L.forEach(i=>{var n,r;let[o,a]=this.get$ScopedPropsOwner(i);if(a){let r=null===(n=o.properties[i])||void 0===n?void 0:n.addOnChangedHandler([this,"attr",t],()=>s());r&&this.attrHattrRemover.push(r),e[t]=()=>o.properties[i]}else{let n=null===(r=o.meta[i])||void 0===r?void 0:r.addOnChangedHandler([this,"attr",t],()=>s());n&&this.attrHattrRemover.push(n),e[t]=()=>o.meta[i]}}),null===(T=r.$le_deps)||void 0===T||T.forEach(i=>{let n;f(()=>{n=this.$le[i[0]].properties[i[1]].addOnChangedHandler([this,"attr",t],()=>s())},d,d,d,"Cannot connect to CLE Obj by Id",5,(e,t)=>{e||s()}),this.attrHattrRemover.push((...e)=>n(...e)),e[t]=()=>this.$le[i[0]].properties[i[1]]}),null===(k=r.$ctx_deps)||void 0===k||k.forEach(i=>{let n;f(()=>{n=this.$ctx[i[0]].properties[i[1]].addOnChangedHandler([this,"attr",t],()=>s())},d,d,d,"Cannot connect to CLE Obj by Ctx Id",5,(e,t)=>{e||s()}),this.attrHattrRemover.push((...e)=>n(...e)),e[t]=()=>this.$ctx[i[0]].properties[i[1]]}),null===(z=r.$ref_deps)||void 0===z||z.forEach(i=>{let n;f(()=>{let e=this.getChildsRefOwner(i[0]).childsRefPointers[i[0]];if(Array.isArray(e))throw Error("Cannot Bind to multi-ref child");n=e.properties[i[1]].addOnChangedHandler([this,"attr",t],()=>s())},d,d,d,"Cannot connect to CLE Obj by Ref Name",5,(e,t)=>{e||s()}),this.attrHattrRemover.push(()=>n()),e[t]=()=>this.getChildsRefOwner(i[0]).childsRefPointers[i[0]].properties[i[1]]}),a.log("Exec 2 way bidning",t,this);let o=i=>{a.log("2way binding changes handled!");let s=e[t](),r=void 0!==n.remap?n.remap.bind(void 0,this.$this)(i.target[t],i):i.target[t];s.value!==r&&(s.value=r)};a.log("Chosing event: ",null!==(M=n.event)&&void 0!==M?M:"input",t,this),this.html_pointer_element.addEventListener(null!==(N=n.event)&&void 0!==N?N:"input",o),this.signalsHandlerRemover.push(()=>this.html_pointer_element.removeEventListener(null!==(F=n.event)&&void 0!==F?F:"input",o)),s()}else this.html_pointer_element[t]=i};t.startsWith("@lazy:")?(a.log("Found lazy!"),setTimeout(()=>n(t.replace("@lazy:","")),10)):n(t)})}if(void 0!==this.convertedDefinition.css){void 0===this.css_html_pointer_element&&(this.css_html_pointer_element=document.createElement("style"),document.getElementsByTagName("head")[0].appendChild(this.css_html_pointer_element));let e=[],t=()=>{this.css_html_pointer_element.innerText=e.map(e=>e.value.replaceAll("\n","").replaceAll("	"," ").replaceAll("   ","").replaceAll("  "," ")).join(" ")};(Array.isArray(this.convertedDefinition.css)?this.convertedDefinition.css:Object.values(this.convertedDefinition.css)).forEach(i=>{e.push(new x(i,h,t,h,()=>this.$this,(e,i)=>{var n,s,r,o,a,l;let h=[];return null===(n=i.$this_deps)||void 0===n||n.forEach(t=>{var i;let n=null===(i=this.properties[t])||void 0===i?void 0:i.addOnChangedHandler(e,()=>e.markAsChanged());n&&h.push(n)}),null===(s=i.$parent_deps)||void 0===s||s.forEach(t=>{var i;let n=null===(i=this.parent.properties[t])||void 0===i?void 0:i.addOnChangedHandler(e,()=>e.markAsChanged());n&&h.push(n)}),null===(r=i.$scope_deps)||void 0===r||r.forEach(t=>{var i;let[n,s]=this.get$ScopedPropsOwner(t),r=null===(i=s?n.properties[t]:n.meta[t])||void 0===i?void 0:i.addOnChangedHandler(e,()=>e.markAsChanged());r&&h.push(r)}),null===(o=i.$le_deps)||void 0===o||o.forEach(i=>{let n;f(()=>{n=this.$le[i[0]].properties[i[1]].addOnChangedHandler(e,()=>e.markAsChanged())},d,d,d,"Cannot connect to CLE Obj by Id",5,(e,i)=>{e||t()}),h.push((...e)=>n(...e))}),null===(a=i.$ctx_deps)||void 0===a||a.forEach(i=>{let n;f(()=>{n=this.$ctx[i[0]].properties[i[1]].addOnChangedHandler(e,()=>e.markAsChanged())},d,d,d,"Cannot connect to CLE Obj by Ctx Id",5,(e,i)=>{e||t()}),h.push((...e)=>n(...e))}),null===(l=i.$ref_deps)||void 0===l||l.forEach(i=>{let n;f(()=>{let t=this.getChildsRefOwner(i[0]).childsRefPointers[i[0]];if(Array.isArray(t))throw Error("Cannot Bind to multi-ref child");n=t.properties[i[1]].addOnChangedHandler(e,()=>e.markAsChanged())},d,d,d,"Cannot connect to CLE Obj by Ref Name",5,(e,i)=>{e||t()}),h.push(()=>n())}),h},!0))}),t()}if(this.isA$ctxComponent&&void 0!==this.convertedDefinition.constructor){let e={};void 0!==this.oj_definition.init&&Object.entries(this.oj_definition.init).forEach(([t,i])=>{i instanceof S?e[t]=i.build(this.parent.$this):e[t]=m(i)?i.bind(void 0,this.parent.$this):i}),this.hooks.constructor=this.convertedDefinition.constructor.bind(void 0,this.$this,e)}for(let e of(void 0!==this.convertedDefinition.onInit&&(this.hooks.onInit=this.convertedDefinition.onInit.bind(void 0,this.$this)),void 0!==this.convertedDefinition.afterChildsInit&&(this.hooks.afterChildsInit=this.convertedDefinition.afterChildsInit.bind(void 0,this.$this)),void 0!==this.convertedDefinition.afterInit&&(this.hooks.afterInit=this.convertedDefinition.afterInit.bind(void 0,this.$this)),void 0!==this.convertedDefinition.onUpdate&&(this.hooks.onUpdate=this.convertedDefinition.onUpdate.bind(void 0,this.$this)),void 0!==this.convertedDefinition.onDestroy&&(this.hooks.onDestroy=this.convertedDefinition.onDestroy.bind(void 0,this.$this)),this.isA$ctxComponent&&void 0!==this.convertedDefinition.constructor&&this.hooks.constructor(),void 0!==this.hooks.onInit&&this.hooks.onInit(),this.childs))e.create();if(void 0!==this.hooks.afterChildsInit&&this.hooks.afterChildsInit(),void 0!==this.hooks.afterInit&&setTimeout(()=>this.hooks.afterInit(),1),void 0!==this.convertedDefinition.s_css){void 0===this.s_css_html_pointer_element&&(this.s_css_html_pointer_element=document.createElement("style"),document.getElementsByTagName("head")[0].appendChild(this.s_css_html_pointer_element));let e=[],t=()=>{this.s_css_html_pointer_element.innerText=e.map(([e,t])=>`[${this.t_uid}]${e},[${this.t_uid}] ${e}{${c(t.value)}}`).join(" ")};Object.entries(this.convertedDefinition.s_css).forEach(([i,n])=>{n.forEach(n=>{e.push([i,new x(n,h,t,h,()=>this.$this,(e,i)=>{var n,s,r,o,a,l;let h=[];return null===(n=i.$this_deps)||void 0===n||n.forEach(t=>{var i;let n=null===(i=this.properties[t])||void 0===i?void 0:i.addOnChangedHandler(e,()=>e.markAsChanged());n&&h.push(n)}),null===(s=i.$parent_deps)||void 0===s||s.forEach(t=>{var i;let n=null===(i=this.parent.properties[t])||void 0===i?void 0:i.addOnChangedHandler(e,()=>e.markAsChanged());n&&h.push(n)}),null===(r=i.$scope_deps)||void 0===r||r.forEach(t=>{var i;let[n,s]=this.get$ScopedPropsOwner(t),r=null===(i=s?n.properties[t]:n.meta[t])||void 0===i?void 0:i.addOnChangedHandler(e,()=>e.markAsChanged());r&&h.push(r)}),null===(o=i.$le_deps)||void 0===o||o.forEach(i=>{let n;f(()=>{n=this.$le[i[0]].properties[i[1]].addOnChangedHandler(e,()=>e.markAsChanged())},d,d,d,"Cannot connect to CLE Obj by Id",5,(e,i)=>{e||t()}),h.push((...e)=>n(...e))}),null===(a=i.$ctx_deps)||void 0===a||a.forEach(i=>{let n;f(()=>{n=this.$ctx[i[0]].properties[i[1]].addOnChangedHandler(e,()=>e.markAsChanged())},d,d,d,"Cannot connect to CLE Obj by Ctx Id",5,(e,i)=>{e||t()}),h.push((...e)=>n(...e))}),null===(l=i.$ref_deps)||void 0===l||l.forEach(i=>{let n;f(()=>{let t=this.getChildsRefOwner(i[0]).childsRefPointers[i[0]];if(Array.isArray(t))throw Error("Cannot Bind to multi-ref child");n=t.properties[i[1]].addOnChangedHandler(e,()=>e.markAsChanged())},d,d,d,"Cannot connect to CLE Obj by Ref Name",5,(e,i)=>{e||t()}),h.push(()=>n())}),h},!0)])})}),t()}}destroy(){var e,t,i,n,s,r,o;void 0!==this.hooks.onDestroy&&this.hooks.onDestroy(),null===(e=this.childs)||void 0===e||e.forEach(e=>e.destroy()),this.destroyDynamicChilds(void 0,!0,!0),null===(t=this.html_pointer_element)||void 0===t||t.remove(),null===(i=this.css_html_pointer_element)||void 0===i||i.remove(),this.css_html_pointer_element=void 0,null===(n=this.s_css_html_pointer_element)||void 0===n||n.remove(),this.s_css_html_pointer_element=void 0;try{delete this.$ctx[this.id]}catch{}try{delete this.$ctx[this.ctx_id]}catch{}try{this.isMyParentHtmlRoot&&delete this.$le.root}catch{}try{this.isA$ctxComponent&&delete this.$ctx.root}catch{}try{this.isA$ctxComponent&&!this.isMyParentHtmlRoot&&void 0!==this.ctx_ref_id&&delete this.parent.$ctx[this.ctx_ref_id]}catch{}delete this.$le[this.id],this.unregisterAsChildsRef(),null===(s=this.handlerRemover)||void 0===s||s.forEach(e=>{try{e()}catch{}}),null===(r=this.attrHattrRemover)||void 0===r||r.forEach(e=>{try{e()}catch{}}),this.singlePropStyleRecomputeHooks=void 0,Object.values(this.signals).forEach(e=>{try{e.destroy()}catch{}}),null===(o=this.signalsHandlerRemover)||void 0===o||o.forEach(e=>{try{e()}catch{}}),Object.values(this.properties).forEach(e=>{try{e.destroy(!0)}catch{}}),this.$oos=void 0}destroyDynamicChilds(e,t=!1,i=!1){var n,s,r;this.dynamicChildsBeforeDestroy(this.parent.$this,this.dynamicChildsState),void 0===e?(null===(n=this.dynamicChilds)||void 0===n||n.forEach(e=>e.destroy()),this.dynamicChilds=[]):(null===(s=this.dynamicChilds)||void 0===s||s.forEach(t=>e.includes(t.$this)&&t.destroy()),this.dynamicChilds=null===(r=this.dynamicChilds)||void 0===r?void 0:r.filter(t=>!e.includes(t.$this))),this.dynamicChildsAfterDestroy(this.parent.$this,this.dynamicChildsState),t&&(this.dynamicChildsState={}),i&&(this.dynamicChildsBeforeDestroy=(e,t)=>{},this.dynamicChildsBeforeDestroy=(e,t)=>{})}constructor(e,t,i,s){var o,a,l,d,h,p;(0,n._)(this,"t_uid",void 0),(0,n._)(this,"id",void 0),(0,n._)(this,"ctx_id",void 0),(0,n._)(this,"ctx_ref_id",void 0),(0,n._)(this,"oj_definition",void 0),(0,n._)(this,"convertedDefinition",void 0),(0,n._)(this,"isMyParentHtmlRoot",void 0),(0,n._)(this,"parent",void 0),(0,n._)(this,"childs",void 0),(0,n._)(this,"dynamicChilds",[]),(0,n._)(this,"dynamicChildsBeforeDestroy",(e,t)=>{}),(0,n._)(this,"dynamicChildsAfterDestroy",(e,t)=>{}),(0,n._)(this,"dynamicChildsState",{}),(0,n._)(this,"properties",{}),(0,n._)(this,"signals",{}),(0,n._)(this,"hooks",{}),(0,n._)(this,"meta",{}),(0,n._)(this,"signalsHandlerRemover",[]),(0,n._)(this,"attrHattrRemover",[]),(0,n._)(this,"handlerRemover",[]),(0,n._)(this,"defDeps",{}),(0,n._)(this,"$this",void 0),(0,n._)(this,"$parent",void 0),(0,n._)(this,"$scope",void 0),(0,n._)(this,"$le",void 0),(0,n._)(this,"$ctx",void 0),(0,n._)(this,"isA$ctxComponent",!1),(0,n._)(this,"$dbus",void 0),(0,n._)(this,"$meta",void 0),(0,n._)(this,"$ref",void 0),(0,n._)(this,"childsRefPointers",{}),(0,n._)(this,"$oos",void 0),(0,n._)(this,"htmlElementType",void 0),(0,n._)(this,"isObjComponent",void 0),(0,n._)(this,"html_pointer_element",void 0),(0,n._)(this,"html_end_pointer_element",void 0),(0,n._)(this,"css_html_pointer_element",void 0),(0,n._)(this,"s_css_html_pointer_element",void 0),(0,n._)(this,"singlePropStyleRecomputeHooks",[]),this.t_uid=Y.generate(),this.isA$ctxComponent=t instanceof H||!(e instanceof Q),this.parent=e,this.isMyParentHtmlRoot=e instanceof HTMLElement,this.oj_definition=t,this.htmlElementType=k(t),this.isObjComponent=["Model","Controller","Service","service","Component","Connector","Signals","Style","Css"].includes(this.htmlElementType),this.isPlaceholderPointerComponent=["LazyPointer"].includes(this.htmlElementType),this.convertedDefinition=Q.parseComponentDefinition((t instanceof H?t.computedTemplate:t)[this.htmlElementType]),this.meta_options={isNewScope:null===(o=this.convertedDefinition.meta)||void 0===o?void 0:o.newScope,noThisInScope:null===(a=this.convertedDefinition.meta)||void 0===a?void 0:a.noThisInScope,noMetaInScope:null===(l=this.convertedDefinition.meta)||void 0===l?void 0:l.noMetaInScope,hasViewChilds:null===(d=this.convertedDefinition.meta)||void 0===d?void 0:d.hasViewChilds,metaPushbackAutomark:null!==(p=null===(h=this.convertedDefinition.meta)||void 0===h?void 0:h.metaPushbackAutomark)&&void 0!==p?p:r.DEFAULTS.META.PUSHBACK_AUTOMARK},this.$le=i,this.$dbus=s,this.$ctx=this.getMy$ctx(),this.$meta=this.getMy$meta(),this.defineAndRegisterId()}}(0,n._)(Q,"parseComponentDefinition",e=>{let t={},i=[],n=(...e)=>{i=[...i,...e]},{childs:s,contains:r,text:o,view:l,">>":d,"=>":h,_:c,"":u}=e;t.childs=s||r||o||l||d||h||c||u,void 0===t.childs||Array.isArray(t.childs)||(t.childs=[t.childs]),n("childs","contains","text","view",">>","=>","_",""),t.state=e.state||"initial",n("state"),p(e,t,["constructor","beforeInit","onInit","afterInit","afterChildsInit","onUpdate","onDestroy","signals","dbus_signals","on","on_s","on_a","alias","handle","when","css","s_css","states","stateChangeStrategy","onState","name","childsRef","oos"]),n("constructor","beforeInit","onInit","afterInit","afterChildsInit","onUpdate","onDestroy","signals","dbus_signals","on","on_s","on_a","alias","handle","when","css","s_css","states","stateChangeStrategy","onState","name","childsRef","oos"),t.checked_deps=e.deps,n("deps");let{id:m,ctx_id:_,ctx_ref_id:f,def:v,"private:def":g,attrs:C,"private:attrs":y,a:b,"private:a":E,hattrs:O,"private:hattrs":x,ha:R,"private:ha":A}=e;n("id","ctx_id","ctx_ref_id","def","private:def","attrs","private:attrs","a","private:a","hattrs","private:hattrs","ha","private:ha"),t.id=m||Z.generate(),t.ctx_id=_||t.id,t.ctx_ref_id=f,void 0!==v&&(t.def=v),void 0!==g&&(t._def=g),(void 0!==C||void 0!==b)&&(t.attrs=C||b),(void 0!==y||void 0!==E)&&(t._attrs=y||E),(void 0!==O||void 0!==R)&&(t.hattrs=O||R),(void 0!==x||void 0!==A)&&(t._hattrs=x||A);let w=Object.keys(e).filter(e=>e.startsWith("a.")||e.startsWith("attrs."));if(n(...w),w.length>0){let i={};w.forEach(t=>{i[t.split(".")[1]]=e[t]}),void 0!==t.attrs?t.attrs={...t.attrs,...i}:t.attrs=i}let H=Object.keys(e).filter(e=>e.startsWith("ha.")||e.startsWith("hattrs."));if(n(...H),H.length>0){let i={};H.forEach(t=>{let n=t.split(".");n.shift(),i[n=n.join(".")]=e[t]}),void 0!==t.hattrs?t.hattrs={...t.hattrs,...i}:t.hattrs=i}let{meta:P}=e;n("meta"),t.meta=P;let{data:S,"private:data":j,props:D,"private:props":I,let:L,"private:let":T}=e;n("data","private:data","props","private:props","let","private:let"),t.data=S||D||L||{},t._data=j||I||T||{};let k={attrs:{},hattrs:{},data:{},def:{},handle:{},when_event_listener:{},signals:{},dbus_signals:{},on_this:{},on_parent:{},on_scope:{},on_dbus:{},on_le:{},on_ctx:{},on_ref:{}};if(Object.keys(e).forEach(t=>{if(t.includes("_")){let i=e[t];if(t.startsWith("a_"))k.attrs[t.substring(2)]=i,n(t);else if(t.startsWith("attr_"))k.attrs[t.substring(5)]=i,n(t);else if(t.startsWith("ha_"))k.hattrs[t.substring(3)]=i,n(t);else if(t.startsWith("hattr_"))k.hattrs[t.substring(6)]=i,n(t);else if(t.startsWith("p_"))k.data[t.substring(2)]=i,n(t);else if(t.startsWith("let_"))k.data[t.substring(4)]=i,n(t);else if(t.startsWith("let "))k.data[t.substring(4)]=i,n(t);else if(t.startsWith("d_"))k.def[t.substring(2)]=i,n(t);else if(t.startsWith("def_"))k.def[t.substring(4)]=i,n(t);else if(t.startsWith("h_"))k.handle[t.substring(2)]=i,n(t);else if(t.startsWith("ev_"))k.handle[t.substring(3)]=i,n(t);else if(t.startsWith("handle_"))k.handle[t.substring(7)]=i,n(t);else if(t.startsWith("w_"))k.when_event_listener[t.substring(2)]=i,n(t);else if(t.startsWith("when_"))k.when_event_listener[t.substring(5)]=i,n(t);else if(t.startsWith("s_"))k.signals[t.substring(2)]=i,n(t);else if(t.startsWith("signal_"))k.signals[t.substring(7)]=i,n(t);else if(t.startsWith("dbus_signal_"))k.dbus_signals[t.substring(12)]=i,n(t);else if(t.startsWith("on_")){if(t.startsWith("on_this_"))k.on_this[t.substring(8)]=i,n(t);else if(t.startsWith("on_parent_"))k.on_parent[t.substring(10)]=i,n(t);else if(t.startsWith("on_scope_"))k.on_scope[t.substring(9)]=i,n(t);else if(t.startsWith("on_dbus_"))k.on_dbus[t.substring(8)]=i,n(t);else if(t.startsWith("on_le_")){let[e,...s]=t.substring(6).split("_"),r=s.join("_");void 0!==k.on_le[e]?k.on_le[e][r]=i:k.on_le[e]={[r]:i},n(t)}else if(t.startsWith("on_ctx_")){let[e,...s]=t.substring(7).split("_"),r=s.join("_");void 0!==k.on_ctx[e]?k.on_ctx[e][r]=i:k.on_ctx[e]={[r]:i},n(t)}else if(t.startsWith("on_ctx_")){let[e,...s]=t.substring(7).split("_"),r=s.join("_");void 0!==k.on_ref[e]?k.on_ref[e][r]=i:k.on_ref[e]={[r]:i},n(t)}else t.startsWith("on_s_")?k.on_scope[t.substring(5)]=i:k.on_scope[t.substring(3)]=i,n(t)}else t.startsWith("on")&&t.endsWith("_event")&&(k.handle[t.substring(0,t.length-6)]=i,n(t))}else["class","style"].includes(t)?(k.attrs[t]=e[t],n(t)):["onclick"].includes(t)&&(k.handle[t]=e[t],n(t))}),Object.keys(e).forEach(t=>{i.includes(t)||(k.data[t]=e[t],a.log("CLE-INFO: unrecognized ",t," converted into props!"))}),Object.keys(k.attrs).length>0&&(void 0!==t.attrs?t.attrs={...t.attrs,...k.attrs}:t.attrs=k.attrs),Object.keys(k.hattrs).length>0&&(void 0!==t.hattrs?t.hattrs={...t.hattrs,...k.hattrs}:t.hattrs=k.hattrs),Object.keys(k.data).length>0&&(void 0!==t.data?t.data={...t.data,...k.data}:t.data=k.data),Object.keys(k.def).length>0&&(void 0!==t.def?t.def={...t.def,...k.def}:t.def=k.def),Object.keys(k.handle).length>0&&(void 0!==t.handle?t.handle={...t.handle,...k.handle}:t.handle=k.handle),Object.keys(k.when_event_listener).length>0&&(void 0!==t.when_event_listener?t.when_event_listener={...t.when_event_listener,...k.when_event_listener}:t.when_event_listener=k.when_event_listener),Object.keys(k.signals).length>0&&(void 0!==t.signals?t.signals={...t.signals,...k.signals}:t.signals=k.signals),Object.keys(k.dbus_signals).length>0&&(void 0!==t.dbus_signals?t.dbus_signals={...t.dbus_signals,...k.dbus_signals}:t.dbus_signals=k.dbus_signals),Object.keys(k.on_this).length>0&&(void 0!==t.on?void 0!==t.on.this?t.on.this={...t.on.this,...k.on_this}:t.on.this=k.on_this:t.on={this:k.on_this}),Object.keys(k.on_parent).length>0&&(void 0!==t.on?void 0!==t.on.parent?t.on.parent={...t.on.parent,...k.on_parent}:t.on.parent=k.on_parent:t.on={parent:k.on_parent}),Object.keys(k.on_scope).length>0&&(void 0!==t.on?void 0!==t.on.scope?t.on.scope={...t.on.scope,...k.on_scope}:t.on.scope=k.on_scope:t.on={scope:k.on_scope}),Object.keys(k.on_dbus).length>0&&(void 0!==t.on?void 0!==t.on.dbus?t.on.dbus={...t.on.dbus,...k.on_dbus}:t.on.dbus=k.on_dbus:t.on={dbus:k.on_dbus}),Object.keys(k.on_le).length>0){if(void 0!==t.on){if(void 0!==t.on.le){let e={...t.on.le};Object.entries(k.on_le).forEach(([t,i])=>{void 0!==e[t]?e[t]={...e[t],...i}:e[t]={...i}}),t.on.le=e}else t.on.le=k.on_le}else t.on={le:k.on_le}}if(Object.keys(k.on_ctx).length>0){if(void 0!==t.on){if(void 0!==t.on.ctx){let e={...t.on.ctx};Object.entries(k.on_ctx).forEach(([t,i])=>{void 0!==e[t]?e[t]={...e[t],...i}:e[t]={...i}}),t.on.ctx=e}else t.on.ctx=k.on_ctx}else t.on={ctx:k.on_ctx}}if(Object.keys(k.on_ref).length>0){if(void 0!==t.on){if(void 0!==t.on.ref){let e={...t.on.ref};Object.entries(k.on_ref).forEach(([t,i])=>{void 0!==e[t]?e[t]={...e[t],...i}:e[t]={...i}}),t.on.ref=e}else t.on.ref=k.on_ref}else t.on={ref:k.on_ref}}if(void 0!==t.beforeInit){let e=t.beforeInit(t,t.childs);t=void 0!==e?e:t}return t}),(0,n._)(Q,"componentFactory",(e,t,i,n)=>{if("string"==typeof t||"function"==typeof t||O(t))return new X(e,t);a.log("Component Factory: ",e,t);let s=k(t),r=(t instanceof H?t.computedTemplate:t)[s];if(eH.has(s)){let t=eH.get(s);return Q.componentFactory(e,Array.isArray(r)?t(...r):t(r),i,n)}return("string"==typeof r||"function"==typeof r||Array.isArray(r))&&(r={text:r},t={[s]:r}),"meta"in r?"if"in r.meta?new et(e,t,i,n):"forEach"in r.meta?new en(e,t,i,n):new Q(e,t,i,n):new Q(e,t,i,n)});class X{buildSkeleton(){this.buildHtmlPointerElement()}buildHtmlPointerElement(){this.html_pointer_element=document.createTextNode(""),this.parent.html_pointer_element.appendChild(this.html_pointer_element)}_renderizeText(){this.html_pointer_element.textContent=m(this.definition)||O(this.definition)?(O(this.definition)?this.definition.getter:this.definition).bind(void 0,this.parent.$this)():this.definition}analizeDeps(){let e=O(this.definition);("function"==typeof this.definition||e)&&(this.staticAnDeps=W(this.definition,e),o.log("Text Deps Analysis: ",this,this.staticAnDeps))}create(){var e,t,i,n,s,r,a;this.analizeDeps(),o.log("Text Node Created!"),null===(e=this.staticAnDeps.$this_deps)||void 0===e||e.forEach(e=>{let t=Array.isArray(e)?e[0]:e,i=this.parent.properties[t];if("addOnChangedHandler"in i)this.depsRemover.push(i.addOnChangedHandler(this,()=>this._renderizeText()));else if(t in this.parent.defDeps){var n,s,r,o,a,l;let i=this.parent.defDeps[t],h=this.parent;null===(n=i.$this_deps)||void 0===n||n.forEach(e=>{let t=Array.isArray(e)?e[0]:e,i=h.properties[t];"addOnChangedHandler"in i&&this.depsRemover.push(i.addOnChangedHandler(this,()=>this._renderizeText()))}),null===(s=i.$parent_deps)||void 0===s||s.forEach(e=>{let t=Array.isArray(e)?e[0]:e,i=h.parent.properties[t];"addOnChangedHandler"in i&&this.depsRemover.push(i.addOnChangedHandler(this,()=>this._renderizeText()))}),null===(r=i.$scope_deps)||void 0===r||r.forEach(t=>{let i=Array.isArray(t)?t[0]:t,[n,s]=h.get$ScopedPropsOwner(e),r=s?n.properties[i]:n.meta[i];"addOnChangedHandler"in r&&this.depsRemover.push(r.addOnChangedHandler(this,()=>this._renderizeText()))}),null===(o=i.$le_deps)||void 0===o||o.forEach(e=>{f(()=>{let t=e[1],i=h.$le[e[0]].properties[t];"addOnChangedHandler"in i&&this.depsRemover.push(i.addOnChangedHandler(this,()=>this._renderizeText()))},d,d,d,"Cannot connect to CLE Obj by Id",5,(e,t)=>{e||this._renderizeText()})}),null===(a=i.$ctx_deps)||void 0===a||a.forEach(e=>{f(()=>{let t=e[1],i=h.$ctx[e[0]].properties[t];"addOnChangedHandler"in i&&this.depsRemover.push(i.addOnChangedHandler(this,()=>this._renderizeText()))},d,d,d,"Cannot connect to CLE Obj by Ctx Id",5,(e,t)=>{e||this._renderizeText()})}),null===(l=i.$ref_deps)||void 0===l||l.forEach(e=>{f(()=>{let t=e[0],i=e[1],n=h.getChildsRefOwner(t).childsRefPointers[t];if(Array.isArray(n))throw Error("Cannot Bind to multi-ref child");let s=n.properties[i];"addOnChangedHandler"in s&&this.depsRemover.push(s.addOnChangedHandler(this,()=>this._renderizeText()))},d,d,d,"Cannot connect to CLE Obj by Ref Name",5,(e,t)=>{e||this._renderizeText()})})}}),null===(t=this.staticAnDeps.$parent_deps)||void 0===t||t.forEach(e=>{let t=Array.isArray(e)?e[0]:e,i=this.parent.parent.properties[t];if("addOnChangedHandler"in i)this.depsRemover.push(i.addOnChangedHandler(this,()=>this._renderizeText()));else if(t in this.parent.parent.defDeps){var n,s,r,o,a,l;let i=this.parent.parent.defDeps[t],h=this.parent.parent;null===(n=i.$this_deps)||void 0===n||n.forEach(e=>{let t=Array.isArray(e)?e[0]:e,i=h.properties[t];"addOnChangedHandler"in i&&this.depsRemover.push(i.addOnChangedHandler(this,()=>this._renderizeText()))}),null===(s=i.$parent_deps)||void 0===s||s.forEach(e=>{let t=Array.isArray(e)?e[0]:e,i=h.parent.properties[t];"addOnChangedHandler"in i&&this.depsRemover.push(i.addOnChangedHandler(this,()=>this._renderizeText()))}),null===(r=i.$scope_deps)||void 0===r||r.forEach(t=>{let i=Array.isArray(t)?t[0]:t,[n,s]=h.get$ScopedPropsOwner(e),r=s?n.properties[i]:n.meta[i];"addOnChangedHandler"in r&&this.depsRemover.push(r.addOnChangedHandler(this,()=>this._renderizeText()))}),null===(o=i.$le_deps)||void 0===o||o.forEach(e=>{f(()=>{let t=e[1],i=h.$le[e[0]].properties[t];"addOnChangedHandler"in i&&this.depsRemover.push(i.addOnChangedHandler(this,()=>this._renderizeText()))},d,d,d,"Cannot connect to CLE Obj by Id",5,(e,t)=>{e||this._renderizeText()})}),null===(a=i.$ctx_deps)||void 0===a||a.forEach(e=>{f(()=>{let t=e[1],i=h.$ctx[e[0]].properties[t];"addOnChangedHandler"in i&&this.depsRemover.push(i.addOnChangedHandler(this,()=>this._renderizeText()))},d,d,d,"Cannot connect to CLE Obj by Ctx Id",5,(e,t)=>{e||this._renderizeText()})}),null===(l=i.$ref_deps)||void 0===l||l.forEach(e=>{f(()=>{let t=e[0],i=e[1],n=h.getChildsRefOwner(t).childsRefPointers[t];if(Array.isArray(n))throw Error("Cannot Bind to multi-ref child");let s=n.properties[i];"addOnChangedHandler"in s&&this.depsRemover.push(s.addOnChangedHandler(this,()=>this._renderizeText()))},d,d,d,"Cannot connect to CLE Obj by Ref Name",5,(e,t)=>{e||this._renderizeText()})})}}),null===(i=this.staticAnDeps.$scope_deps)||void 0===i||i.forEach(e=>{let t=Array.isArray(e)?e[0]:e,[i,n]=this.parent.get$ScopedPropsOwner(t),s=n?i.properties[t]:i.meta[t];if("addOnChangedHandler"in s)this.depsRemover.push(s.addOnChangedHandler(this,()=>this._renderizeText()));else if(t in i.defDeps){var r,o,a,l,h,p;let n=i.defDeps[t];null===(r=n.$this_deps)||void 0===r||r.forEach(e=>{let t=Array.isArray(e)?e[0]:e,n=i.properties[t];"addOnChangedHandler"in n&&this.depsRemover.push(n.addOnChangedHandler(this,()=>this._renderizeText()))}),null===(o=n.$parent_deps)||void 0===o||o.forEach(e=>{let t=Array.isArray(e)?e[0]:e,n=i.parent.properties[t];"addOnChangedHandler"in n&&this.depsRemover.push(n.addOnChangedHandler(this,()=>this._renderizeText()))}),null===(a=n.$scope_deps)||void 0===a||a.forEach(t=>{let n=Array.isArray(t)?t[0]:t,[s,r]=i.get$ScopedPropsOwner(e),o=r?s.properties[n]:s.meta[n];"addOnChangedHandler"in o&&this.depsRemover.push(o.addOnChangedHandler(this,()=>this._renderizeText()))}),null===(l=n.$le_deps)||void 0===l||l.forEach(e=>{f(()=>{let t=e[1],n=i.$le[e[0]].properties[t];"addOnChangedHandler"in n&&this.depsRemover.push(n.addOnChangedHandler(this,()=>this._renderizeText()))},d,d,d,"Cannot connect to CLE Obj by Id",5,(e,t)=>{e||this._renderizeText()})}),null===(h=n.$ctx_deps)||void 0===h||h.forEach(e=>{f(()=>{let t=e[1],n=i.$ctx[e[0]].properties[t];"addOnChangedHandler"in n&&this.depsRemover.push(n.addOnChangedHandler(this,()=>this._renderizeText()))},d,d,d,"Cannot connect to CLE Obj by Ctx Id",5,(e,t)=>{e||this._renderizeText()})}),null===(p=n.$ref_deps)||void 0===p||p.forEach(e=>{f(()=>{let t=e[0],n=e[1],s=i.getChildsRefOwner(t).childsRefPointers[t];if(Array.isArray(s))throw Error("Cannot Bind to multi-ref child");let r=s.properties[n];"addOnChangedHandler"in r&&this.depsRemover.push(r.addOnChangedHandler(this,()=>this._renderizeText()))},d,d,d,"Cannot connect to CLE Obj by Ref Name",5,(e,t)=>{e||this._renderizeText()})})}}),null===(n=this.staticAnDeps.$le_deps)||void 0===n||n.forEach(e=>{f(()=>{let t=e[1],i=this.parent.$le[e[0]].properties[t];if("addOnChangedHandler"in i)this.depsRemover.push(i.addOnChangedHandler(this,()=>this._renderizeText()));else if(t in this.parent.$le[e[0]].defDeps){var n,s,r,o,a,l;let i=this.parent.$le[e[0]].defDeps[t],h=this.parent.$le[e[0]];null===(n=i.$this_deps)||void 0===n||n.forEach(e=>{let t=Array.isArray(e)?e[0]:e,i=h.properties[t];"addOnChangedHandler"in i&&this.depsRemover.push(i.addOnChangedHandler(this,()=>this._renderizeText()))}),null===(s=i.$parent_deps)||void 0===s||s.forEach(e=>{let t=Array.isArray(e)?e[0]:e,i=h.parent.properties[t];"addOnChangedHandler"in i&&this.depsRemover.push(i.addOnChangedHandler(this,()=>this._renderizeText()))}),null===(r=i.$scope_deps)||void 0===r||r.forEach(t=>{let i=Array.isArray(t)?t[0]:t,[n,s]=h.get$ScopedPropsOwner(e),r=s?n.properties[i]:n.meta[i];"addOnChangedHandler"in r&&this.depsRemover.push(r.addOnChangedHandler(this,()=>this._renderizeText()))}),null===(o=i.$le_deps)||void 0===o||o.forEach(e=>{f(()=>{let t=e[1],i=h.$le[e[0]].properties[t];"addOnChangedHandler"in i&&this.depsRemover.push(i.addOnChangedHandler(this,()=>this._renderizeText()))},d,d,d,"Cannot connect to CLE Obj by Id",5,(e,t)=>{e||this._renderizeText()})}),null===(a=i.$ctx_deps)||void 0===a||a.forEach(e=>{f(()=>{let t=e[1],i=h.$ctx[e[0]].properties[t];"addOnChangedHandler"in i&&this.depsRemover.push(i.addOnChangedHandler(this,()=>this._renderizeText()))},d,d,d,"Cannot connect to CLE Obj by Ctx Id",5,(e,t)=>{e||this._renderizeText()})}),null===(l=i.$ref_deps)||void 0===l||l.forEach(e=>{f(()=>{let t=e[0],i=e[1],n=h.getChildsRefOwner(t).childsRefPointers[t];if(Array.isArray(n))throw Error("Cannot Bind to multi-ref child");let s=n.properties[i];"addOnChangedHandler"in s&&this.depsRemover.push(s.addOnChangedHandler(this,()=>this._renderizeText()))},d,d,d,"Cannot connect to CLE Obj by Ref Name",5,(e,t)=>{e||this._renderizeText()})})}},d,d,d,"Cannot connect to CLE Obj by Id",5,(e,t)=>{e||this._renderizeText()})}),null===(s=this.staticAnDeps.$ctx_deps)||void 0===s||s.forEach(e=>{f(()=>{let t=e[1],i=this.parent.$ctx[e[0]].properties[t];if("addOnChangedHandler"in i)this.depsRemover.push(i.addOnChangedHandler(this,()=>this._renderizeText()));else if(t in this.parent.$ctx[e[0]].defDeps){var n,s,r,o,a,l;let i=this.parent.$ctx[e[0]].defDeps[t],h=this.parent.$ctx[e[0]];null===(n=i.$this_deps)||void 0===n||n.forEach(e=>{let t=Array.isArray(e)?e[0]:e,i=h.properties[t];"addOnChangedHandler"in i&&this.depsRemover.push(i.addOnChangedHandler(this,()=>this._renderizeText()))}),null===(s=i.$parent_deps)||void 0===s||s.forEach(e=>{let t=Array.isArray(e)?e[0]:e,i=h.parent.properties[t];"addOnChangedHandler"in i&&this.depsRemover.push(i.addOnChangedHandler(this,()=>this._renderizeText()))}),null===(r=i.$scope_deps)||void 0===r||r.forEach(t=>{let i=Array.isArray(t)?t[0]:t,[n,s]=h.get$ScopedPropsOwner(e),r=s?n.properties[i]:n.meta[i];"addOnChangedHandler"in r&&this.depsRemover.push(r.addOnChangedHandler(this,()=>this._renderizeText()))}),null===(o=i.$le_deps)||void 0===o||o.forEach(e=>{f(()=>{let t=e[1],i=h.$le[e[0]].properties[t];"addOnChangedHandler"in i&&this.depsRemover.push(i.addOnChangedHandler(this,()=>this._renderizeText()))},d,d,d,"Cannot connect to CLE Obj by Id",5,(e,t)=>{e||this._renderizeText()})}),null===(a=i.$ctx_deps)||void 0===a||a.forEach(e=>{f(()=>{let t=e[1],i=h.$ctx[e[0]].properties[t];"addOnChangedHandler"in i&&this.depsRemover.push(i.addOnChangedHandler(this,()=>this._renderizeText()))},d,d,d,"Cannot connect to CLE Obj by Ctx Id",5,(e,t)=>{e||this._renderizeText()})}),null===(l=i.$ref_deps)||void 0===l||l.forEach(e=>{f(()=>{let t=e[0],i=e[1],n=h.getChildsRefOwner(t).childsRefPointers[t];if(Array.isArray(n))throw Error("Cannot Bind to multi-ref child");let s=n.properties[i];"addOnChangedHandler"in s&&this.depsRemover.push(s.addOnChangedHandler(this,()=>this._renderizeText()))},d,d,d,"Cannot connect to CLE Obj by Ref Name",5,(e,t)=>{e||this._renderizeText()})})}},d,d,d,"Cannot connect to CLE Obj by Ctx Id",5,(e,t)=>{e||this._renderizeText()})}),null===(r=this.staticAnDeps.$ref_deps)||void 0===r||r.forEach(e=>{f(()=>{let t=e[1],i=this.parent.getChildsRefOwner(e[0]).childsRefPointers[e[0]];if(Array.isArray(i))throw Error("Cannot Bind to multi-ref child");let n=i.properties[t];"addOnChangedHandler"in n?this.depsRemover.push(n.addOnChangedHandler(this,()=>this._renderizeText())):l.log("CLE Warning - function in ref in text as deps not supported at this time")},d,d,d,"Cannot connect to CLE Obj by Ref Name",5,(e,t)=>{e||this._renderizeText()})}),null===(a=this.staticAnDeps.$external_deps)||void 0===a||a.forEach(e=>{void 0!==e&&"addOnChangedHandler"in e&&this.depsRemover.push(e.addOnChangedHandler(this,()=>this._renderizeText()))}),this._renderizeText()}destroy(){var e;this.html_pointer_element.remove(),null===(e=this.depsRemover)||void 0===e||e.forEach(e=>e())}constructor(e,t){(0,n._)(this,"html_pointer_element",void 0),(0,n._)(this,"definition",void 0),(0,n._)(this,"parent",void 0),(0,n._)(this,"depsRemover",[]),(0,n._)(this,"staticAnDeps",{}),this.parent=e,this.definition=t}}class ee extends Q{setupMountPoint(e){this.html_mount_point=e}setupMode(e){this.insertion_mode=e}buildHtmlPointerElement(){if(this.html_pointer_element=document.createElement(this.htmlElementType),"append"===this.insertion_mode)this.html_mount_point.appendChild(this.html_pointer_element);else if("before"===this.insertion_mode)this.html_mount_point.before(this.html_pointer_element);else if("after"===this.insertion_mode)this.html_mount_point.after(this.html_pointer_element);else throw Error("Unsupported Subrender insertion mode!");this.html_pointer_element.setAttribute(this.t_uid,"")}static SubRendererComponentFactory(e,t,i,n=!1,s="append"){let r=()=>{let n=new ee(e,i,e.$le,e.$dbus);return n.setupMountPoint(t),n.setupMode(s),n.buildSkeleton(),n.create(),n};return n?r:r()}}class et extends Q{buildHtmlPointerElementAnchor(){this.html_pointer_element_anchor=document.createComment("le-if"),this.isMyParentHtmlRoot?this.parent.appendChild(this.html_pointer_element_anchor):this.parent.html_pointer_element.appendChild(this.html_pointer_element_anchor)}buildSkeleton(){this.buildHtmlPointerElementAnchor()}buildChildsSkeleton(){}buildHtmlPointerElement(){if(this.isObjComponent)this.html_pointer_element=document.createElement("leobj"),this.meta_options.hasViewChilds&&this.html_pointer_element_anchor.after(this.html_pointer_element);else if(this.isPlaceholderPointerComponent){this.html_pointer_element=document.createComment("cleptr"),this.html_pointer_element_anchor.after(this.html_pointer_element);return}else this.html_pointer_element=document.createElement(this.htmlElementType),this.html_pointer_element_anchor.after(this.html_pointer_element),a.log("Created after comment anchor!");this.html_pointer_element.setAttribute(this.t_uid,"")}_create(){a.log("Start recreating: ",this),super.defineAndRegisterId(),super.buildSkeleton(),super.buildChildsSkeleton(),super.create()}create(){this.buildPropertiesRef(),this.visible=new x(this.convertedDefinition.meta.if,h,(e,t,i)=>{a.log("set: ",e,t,i),e!==i._latestResolvedValue&&(e?this._create():this._destroy())},d,()=>this.$this,(e,t,i=[])=>{var n,s,r,o,l;let h=[];return a.log("LEIF - Calculating deps"),null===(n=t.$parent_deps)||void 0===n||n.forEach(t=>{var i;let n=null===(i=this.parent.properties[t])||void 0===i?void 0:i.addOnChangedHandler(e,()=>e.markAsChanged());n&&h.push(n)}),null===(s=t.$scope_deps)||void 0===s||s.forEach(t=>{var i;let[n,s]=this.get$ScopedPropsOwner(t),r=null===(i=s?n.properties[t]:n.meta[t])||void 0===i?void 0:i.addOnChangedHandler(e,()=>e.markAsChanged());r&&h.push(r)}),null===(r=t.$le_deps)||void 0===r||r.forEach(t=>{let i;f(()=>{i=this.$le[t[0]].properties[t[1]].addOnChangedHandler(e,()=>e.markAsChanged())},d,d,d,"Cannot connect to CLE Obj by Id",5),h.push((...e)=>i(...e))}),null===(o=t.$ctx_deps)||void 0===o||o.forEach(t=>{let i;f(()=>{i=this.$ctx[t[0]].properties[t[1]].addOnChangedHandler(e,()=>e.markAsChanged())},d,d,d,"Cannot connect to CLE Obj by Ctx Id",5),h.push((...e)=>i(...e))}),null===(l=t.$ref_deps)||void 0===l||l.forEach(t=>{let i;f(()=>{let n=this.getChildsRefOwner(t[0]).childsRefPointers[t[0]];if(Array.isArray(n))throw Error("Cannot Bind to multi-ref child");i=n.properties[t[1]].addOnChangedHandler(e,()=>e.markAsChanged())},d,d,d,"Cannot connect to CLE Obj by Ref Name",5),h.push(()=>i())}),null==i||i.forEach(t=>{let i=null==t?void 0:t.addOnChangedHandler(e,()=>e.markAsChanged());i&&h.push(i)}),h},!0),a.log("Last if condition: ",this,this.convertedDefinition.meta.if),this.visible.value&&this._create()}_destroy(){super.destroy()}destroy(){this.html_pointer_element_anchor.remove(),this.visible.destroy(!0),super.destroy()}constructor(...e){super(...e),(0,n._)(this,"visible",!1),(0,n._)(this,"html_pointer_element_anchor",void 0)}}class ei extends Q{buildHtmlPointerElement(){this.parentIterableView.buildChildHtmlPointerElement(this,this.iterableIndex,this.is_full_rebuild)}updateDataRerencesAndMeta(e,t,i,n,s=!0){this.iterableIndex=e,this.meta_config=t,Object.entries(this.meta).forEach(([e,t])=>{!(s&&e===this.meta_config.iterablePropertyIdentifier)&&t instanceof x&&(null==t||t.markAsChanged())}),void 0!==this.hooks.onUpdate&&this.hooks.onUpdate()}constructor(e,t,i,n,s,r,o,l,d){super(e,t,i,n),this.parentIterableView=s,this.iterableIndex=r,this.meta_config=o,this.meta_options=l,this.is_full_rebuild=d,this.meta[this.meta_config.iterablePropertyIdentifier]=new x(this.meta_config.value,h,e=>{a.log("META: push back value edit!"),this.meta_config.define_helper.iterable[this.meta_config.define_helper.index]=e,this.meta_options.metaPushbackAutomark&&this.meta_config.realPointedIterableProperty.markAsChanged(),this.signals[this.meta_config.iterablePropertyIdentifier+"Changed"].emit(e,this.meta[this.meta_config.iterablePropertyIdentifier]._latestResolvedValue)},h,()=>this.$this,h,!0),void 0!==this.meta_config.define&&Object.entries(this.meta_config.define).forEach(([e,t])=>{if(e in this.meta_config.define_helper){let i=t+"Changed";this.meta[t]=new x(()=>this.meta_config.define_helper[e],h,(e,n,s)=>{e!==n&&this.signals[i].emit(e,this.meta[t]._latestResolvedValue)},h,()=>this.$this,h,!0),this.signals[i]=new R(i,"stream => (newValue: any, oldValue: any) - meta property change signal")}else this.meta[e]=new x(t,h,()=>{throw Error("meta define variable cannot be setted")},h,[()=>this.parent.$this,()=>this.$this],h,!0);a.log("I have some 'define' inside meta!",this.meta,e,t,this.meta_config.define)});let p="_mark_"+this.meta_config.iterablePropertyIdentifier+"_as_changed";this.meta[p]=()=>this.meta[this.meta_config.iterablePropertyIdentifier].markAsChanged();let c=this.meta_config.iterablePropertyIdentifier+"Changed";this.signals[c]=new R(c,"stream => (newValue: any, oldValue: any) - property change signal"),a.log("before meta: ",this.$meta,this.parent.$meta,this.meta,this.parent.meta,this.parent),this.$meta=this.getMy$meta(),a.log("after meta: ",this.$meta,this.parent.$meta,this.meta,this.parent.meta,this.parent)}}class en{get$ScopedPropsOwner(e,t=0,i=!1,n=!1){if(0===t&&(i=this.meta_options.noMetaInScope),void 0===this.parent||!(this.parent instanceof Q))return[this,!0];if(0===t&&this.meta_options.noThisInScope)return this.parent.get$ScopedPropsOwner(e,t+1,i,n);if(e in this.properties||n&&e in this.signals)return[this,!0];if(!this.meta_options.isNewScope)return this.parent.get$ScopedPropsOwner(e,t+1,i,n);throw Error("Properties cannot be found in this scope..blocked scope?")}buildHtmlPointerElementAnchor(){this.html_pointer_element_anchor=document.createComment("le-for"),this.html_end_pointer_element_anchor=document.createComment("le-for-end"),this.isMyParentHtmlRoot?(this.parent.appendChild(this.html_pointer_element_anchor),this.parent.appendChild(this.html_end_pointer_element_anchor)):(this.parent.html_pointer_element.appendChild(this.html_pointer_element_anchor),this.parent.html_pointer_element.appendChild(this.html_end_pointer_element_anchor))}buildChildHtmlPointerElement(e,t,i){e.html_pointer_element=document.createElement(e.htmlElementType),i?this.html_end_pointer_element_anchor.before(e.html_pointer_element):0===t?this.html_pointer_element_anchor.after(e.html_pointer_element):this.childs[t-1].html_pointer_element.after(e.html_pointer_element),e.html_pointer_element.setAttribute(e.t_uid,"")}sortExistingChildsInDomAsChildsArrOrder(){let e;let t=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},i=this.html_pointer_element_anchor;this.childs.forEach((n,s)=>{0===s?t(n.html_pointer_element,i):t(n.html_pointer_element,e),e=n.html_pointer_element})}buildSkeleton(){this.buildHtmlPointerElementAnchor(),this.buildPropertiesRef()}buildPropertiesRef(){var e,t;this.properties.parent=null===(e=this.parent)||void 0===e?void 0:null===(t=e.$this)||void 0===t?void 0:t.this,this.$parent=this.parent instanceof Q?z(this.parent.properties):void 0,this.$scope=N(this),this.$this=M({parent:this.$parent,le:this.$le.proxy,scope:this.$scope,ctx:this.parent.$ctx.proxy,meta:this.parent.$meta})}detectChangesAndRebuildChilds(e,t){var i,n,s;let a=void 0!==this.meta_def.idComparer&&m(this.meta_def.idComparer)?this.meta_def.idComparer:(e,t)=>e!==t,l=void 0!==this.meta_def.subComparer&&m(this.meta_def.subComparer)?this.meta_def.subComparer:void 0,d=null!==(i=this.meta_def.full_optimized)&&void 0!==i?i:r.DEFAULTS.META.FULL_OPTIMIZED;if(d){let i=[...this.childs],s=[],r=[],d=(e,t,i)=>{for(let t=0;t<i.length;t++)if(!a(e,i[t].meta_config.value))return[!0,t];return[!1,void 0]};e.forEach((n,a)=>{let[l,h]=d(n,a,i);if(l)o.log("sorted!!",n,t,"-->",a),s.push(i.splice(h,1)[0]);else{o.log("new!!",n,a);let t=new ei(this.parent,this.real_iterable_definition,this.$le,this.$dbus,this,a,{realPointedIterableProperty:this.real_pointed_iterable_property,iterablePropertyIdentifier:this.iterablePropertyIdentifier,value:e[a],define:this.meta_def.define,define_helper:{index:a,first:0===a,last:a===e.length-1,length:e.length,iterable:e}},this.meta_options,!1);s.push(t),r.push(t)}}),i.forEach(e=>{o.log("destroied!!",e),e.destroy()}),o.log("OLD",this.childs),this.childs.splice(0,this.childs.length,...s),r.forEach(e=>{e.buildSkeleton()}),r.forEach(e=>{e.create()}),this.sortExistingChildsInDomAsChildsArrOrder(),o.log("NEW",this.childs),null===(n=this.iterableProperty.value)||void 0===n||n.forEach((e,t,i)=>{this.childs[t].updateDataRerencesAndMeta(t,{realPointedIterableProperty:this.real_pointed_iterable_property,iterablePropertyIdentifier:this.iterablePropertyIdentifier,value:e,define:this.meta_def.define,define_helper:{index:t,first:0===t,last:t===i.length-1,length:i.length,iterable:i}},a,l,!0)})}else{let i={},n=this.childs;for(let t=0;t<e.length;t++){let s=e[t];(void 0===n[t]||a(s,n[t].meta_config.value))&&(i[t]=s)}let r=[];for(let t in i){let i=parseInt(t),s=new ei(this.parent,this.real_iterable_definition,this.$le,this.$dbus,this,i,{realPointedIterableProperty:this.real_pointed_iterable_property,iterablePropertyIdentifier:this.iterablePropertyIdentifier,value:e[i],define:this.meta_def.define,define_helper:{index:i,first:0===i,last:i===e.length-1,length:e.length,iterable:e}},this.meta_options,!1);void 0===n[i]||n[i].destroy(),n[i]=s,s.buildSkeleton(),r.push(s)}if(e.length<t.length)for(let i=e.length;i<t.length;i++)n[i].destroy(),n.splice(i,1);r.forEach(e=>e.create()),null===(s=this.iterableProperty.value)||void 0===s||s.forEach((e,t,i)=>{this.childs[t].updateDataRerencesAndMeta(t,{realPointedIterableProperty:this.real_pointed_iterable_property,iterablePropertyIdentifier:this.iterablePropertyIdentifier,value:e,define:this.meta_def.define,define_helper:{index:t,first:0===t,last:t===i.length-1,length:i.length,iterable:i}},a,l,!0)})}}buildChildsSkeleton(e=!1,t){var i,n;e&&(this.meta_def.optimized||(null!==(i=this.meta_def.full_optimized)&&void 0!==i?i:r.DEFAULTS.META.FULL_OPTIMIZED))?this.detectChangesAndRebuildChilds(this.iterableProperty.value,t):(this._destroyChilds(),this.childs=(null===(n=this.iterableProperty.value)||void 0===n?void 0:n.map((e,t,i)=>new ei(this.parent,this.real_iterable_definition,this.$le,this.$dbus,this,t,{realPointedIterableProperty:this.real_pointed_iterable_property,iterablePropertyIdentifier:this.iterablePropertyIdentifier,value:e,define:this.meta_def.define,define_helper:{index:t,first:0===t,last:t===i.length-1,length:i.length,iterable:i}},this.meta_options,!0)))||[],this.childs.forEach(e=>e.buildSkeleton()),this.childs.forEach(e=>e.create()))}_destroyChilds(){this.childs.length>0&&(this.childs.map(e=>e.destroy()),this.childs=[])}_create(e=!1,t){a.log("start recreating: ",this),this.buildChildsSkeleton(e,t)}create(){this.iterablePropertyIdentifier=this.meta_def.forEach,this.iterableProperty=new x(this.meta_def.of,h,(e,t,i)=>{a.log("set iterable",e,t,i),void 0!==this.meta_def.comparer?this.meta_def.comparer(e,i._latestResolvedValue)&&this._create(!0,i._latestResolvedValue):e!==i._latestResolvedValue&&this._create(!0,i._latestResolvedValue)},d,()=>this.$this,(e,t,i=[])=>{var n,s,r,o,l;let h=[];return a.log("calculating deps"),null===(n=t.$parent_deps)||void 0===n||n.forEach(t=>{var i;let n=null===(i=this.parent.properties[t])||void 0===i?void 0:i.addOnChangedHandler(e,()=>e.markAsChanged());n&&h.push(n),this.real_pointed_iterable_property.markAsChanged=()=>{var e;null===(e=this.parent.properties[t])||void 0===e||e.markAsChanged()}}),null===(s=t.$scope_deps)||void 0===s||s.forEach(t=>{var i;let[n,s]=this.get$ScopedPropsOwner(t),r=null===(i=s?n.properties[t]:n.meta[t])||void 0===i?void 0:i.addOnChangedHandler(e,()=>e.markAsChanged());r&&h.push(r),this.real_pointed_iterable_property.markAsChanged=()=>{var e;null===(e=s?n.properties[t]:n.meta[t])||void 0===e||e.markAsChanged()}}),null===(r=t.$le_deps)||void 0===r||r.forEach(t=>{let i;f(()=>{i=this.$le[t[0]].properties[t[1]].addOnChangedHandler(e,()=>e.markAsChanged())},d,d,d,"Cannot connect to CLE Obj by Id",5),h.push((...e)=>i(...e)),this.real_pointed_iterable_property.markAsChanged=()=>{var e;null===(e=this.$le[t[0]].properties[t[1]])||void 0===e||e.markAsChanged()}}),null===(o=t.$ctx_deps)||void 0===o||o.forEach(t=>{let i;f(()=>{i=this.$ctx[t[0]].properties[t[1]].addOnChangedHandler(e,()=>e.markAsChanged())},d,d,d,"Cannot connect to CLE Obj by Ctx Id",5),h.push((...e)=>i(...e)),this.real_pointed_iterable_property.markAsChanged=()=>{var e;null===(e=this.$ctx[t[0]].properties[t[1]])||void 0===e||e.markAsChanged()}}),null===(l=t.$ref_deps)||void 0===l||l.forEach(t=>{let i;f(()=>{let n=this.getChildsRefOwner(t[0]).childsRefPointers[t[0]];if(Array.isArray(n))throw Error("Cannot Bind to multi-ref child");i=n.properties[t[1]].addOnChangedHandler(e,()=>e.markAsChanged())},d,d,d,"Cannot connect to CLE Obj by Ref Name",5),h.push(()=>i()),this.real_pointed_iterable_property.markAsChanged=()=>{this.getChildsRefOwner(t[0]).childsRefPointers[t[0]].properties[t[1]].markAsChanged()}}),null==i||i.forEach(t=>{let i=null==t?void 0:t.addOnChangedHandler(e,()=>e.markAsChanged());i&&h.push(i),this.real_pointed_iterable_property.markAsChanged=()=>{null==t||t.markAsChanged()}}),h},!0),a.log("last of condition: ",this,this.meta_def.of),this.iterableProperty.value.length>0&&this._create(!1,void 0)}destroy(){this._destroyChilds(),this.html_pointer_element_anchor.remove(),this.html_end_pointer_element_anchor.remove(),this.iterableProperty.destroy(!0)}constructor(e,t,i,s){var o,a,l,d,h,p;(0,n._)(this,"iterableProperty",void 0),(0,n._)(this,"iterablePropertyIdentifier",void 0),(0,n._)(this,"parent",void 0),(0,n._)(this,"$le",void 0),(0,n._)(this,"$dbus",void 0),(0,n._)(this,"oj_definition",void 0),(0,n._)(this,"real_iterable_definition",void 0),(0,n._)(this,"meta_def",void 0),(0,n._)(this,"properties",{}),(0,n._)(this,"signals",{}),(0,n._)(this,"$this",void 0),(0,n._)(this,"$parent",void 0),(0,n._)(this,"childs",[]),(0,n._)(this,"html_pointer_element_anchor",void 0),(0,n._)(this,"html_end_pointer_element_anchor",void 0),(0,n._)(this,"real_pointed_iterable_property",void 0),this.parent=e,this.$le=i,this.$dbus=s,this.oj_definition=t,this.meta_def=(t instanceof H?t.computedTemplate:t)[k(t)].meta,this.real_iterable_definition=t instanceof H?t.cloneWithoutMeta():v(t),this.meta_options={isNewScope:null===(o=this.meta_def)||void 0===o?void 0:o.newScope,noThisInScope:null===(a=this.meta_def)||void 0===a?void 0:a.noThisInScope,noMetaInScope:null===(l=this.meta_def)||void 0===l?void 0:l.noMetaInScope,hasViewChilds:null===(d=this.meta_def)||void 0===d?void 0:d.hasViewChilds,metaPushbackAutomark:null!==(p=null===(h=this.meta_def)||void 0===h?void 0:h.metaPushbackAutomark)&&void 0!==p?p:r.DEFAULTS.META.PUSHBACK_AUTOMARK},this.real_pointed_iterable_property={markAsChanged:()=>{}}}}let es=()=>{void 0===window._Caged_LE_Loaded&&(window._Caged_LE_Loaded={})},er=(e,{do_microwait:t,attr:i={},debug:n=!1}={})=>(es(),new Promise(function(s,r){if(void 0!==window._Caged_LE_Loaded[e]){a.log("css already loaded!"),void 0!==t?setTimeout(()=>{s(window._Caged_LE_Loaded[e])},t):s(window._Caged_LE_Loaded[e]);return}let o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("href",e),Object.keys(i).map(e=>o.setAttribute(e,i)),o.onload=i=>{window._Caged_LE_Loaded[e]=o,n&&a.log("resolved!",i),o.LE_removeStyle=()=>{window._Caged_LE_Loaded[e].remove(),delete window._Caged_LE_Loaded[e]},void 0!==t?setTimeout(()=>{s(window._Caged_LE_Loaded[e])},t):s(window._Caged_LE_Loaded[e])},o.onerror=r,document.head.appendChild(o)})),eo=e=>{document.addEventListener("DOMContentLoaded",e)},ea=(e,t=!1,...i)=>(t||(e=e[0]),(e=(e=e.replaceAll("@m.","$.meta.").replaceAll("@s.","$.scope.").replaceAll("@p.","$.parent.").replaceAll("@t.","$.this.").replaceAll("@l.","$.le.").replaceAll("@c.","$.ctx.").replaceAll("@d.","$.dbus.").replaceAll("@","$.scope.")).replaceAll(":m:","$.meta.").replaceAll(":s:","$.scope.").replaceAll(":p:","$.parent.").replaceAll(":t:","$.this.").replaceAll(":l:","$.le.").replaceAll(":c:","$.ctx.").replaceAll(":d:","$.dbus.").replaceAll(":::","$.meta.").replaceAll("::","$.scope.")).includes("return")||e.startsWith("{"))?Function("$",...i,e):Function("$",...i,"return "+e),el=(...e)=>(t,i=!1)=>ea(t,i,...e),ed=new Proxy({},{get:(e,t,i)=>(e,...i)=>void 0===e&&0===i.length?{[t]:{}}:"string"==typeof e||"function"==typeof e?{[t]:0===i.length?e:[e,...i]}:{[t]:{...e,...i.length?{"":i}:{}}},set:function(e,t,i){}}),eh=new Proxy({},{get:(e,t,i)=>t,set:function(e,t,i){}}),ep=new Proxy({},{get:(e,t,i)=>t.replaceAll("_"," "),set:function(e,t,i){}}),ec=(e,t)=>({["let_"+e]:t}),eu=(e,t,i="")=>e?" "+t:i,em={beforeinit:"beforeInit",oninit:"onInit",afterchildsinit:"afterChildsInit",afterinit:"afterInit",ondestroy:"onDestroy",onupdate:"onUpdate",constructor:"constructor"},e_=(e,t,i,n)=>{if(8!==e.nodeType){if("#text"===e.nodeName){let t=e.textContent;return/^\s*$/.test(t)?void 0:t.includes("{{")&&t.includes("}}")?(function(e){let t=/{{(.*?)}}/g;[...e.matchAll(t)].sort((e,t)=>e.index-t.index);let i=[],n=0;for(let s of e.matchAll(t)){let t=s.index,r=s[0],o=s[1],a={index:t,text:o,match:!0};if(n<t){let s=e.slice(n,t);i.push({index:n,text:s,match:!1})}i.push(a),n=t+r.length}if(n<e.length){let t=e.slice(n);i.push({index:n,text:t,match:!1})}return i})(t).map(e=>e.match?ea(e.text,!0):e.text):t}{let s,r=e.tagName.toLowerCase();if("js-val"===r)return el("Cle","params","state","DepsInj","u")(Array.from(e.childNodes)[0].textContent,!0)(void 0,eP,n.params,n.state,n.DepsInj,n.u);let a={},l={},d={},h={},p={},c={},m={},_={},f={},v={},g={},C={},y={};for(let t of e.attributes||[])if("extra-defs"===t.name)s=t.value;else if("[use-options]"===t.name)y=ea(t.value,!0)(),o.log("USE OPTIONS: ",y);else if("[raw-defs]"===t.name)C=ea(t.value,!0)(),o.log("RAW DEFS: ",C);else if(t.name.startsWith("[raw-def-")){let e=u(t.name.substring(9,t.name.length-1));C={...C,[e]:ea(t.value,!0)()},o.log("RAW DEF BY KEY:",e,C)}else if(t.name.startsWith("#"))"#id"===t.name?g.id=t.value:"#ctx_id"===t.name||"#ctx-id"===t.name?g.ctx_id=t.value:"#ctx_ref_id"===t.name||"#ctx-ref-id"===t.name?g.ctx_ref_id=t.value:"#name"===t.name?g.name=t.value:console.log("UNSUPPORTED AT THIS TIME: ",t);else if(t.name.startsWith("meta-")||t.name.startsWith("[meta-")&&t.name.endsWith("]")){let e=t.name.startsWith("[")?t.name.substring(6,t.name.length-1):t.name.substring(5);if("foreach"===e){let[e,i]=t.value.split(" of ");f.forEach=e,f.of=ea(i,!0)}else"if"===e?f.if=ea(t.value,!0):"optimized"===e?f.optimized="true"===t.value:"full_optimized"===e||"full-optimized"===e?f.full_optimized="true"===t.value:"comparer"===e?f.comparer=ea(t.value,!0):"idcomparer"===e||"id-comparer"===e?f.idComparer=ea(t.value,!0):e.startsWith("define-")?(e=u(e.substring(7)),void 0===f.define&&(f.define={}),f.define[e]=t.value):console.log("UNSUPPORTED AT THIS TIME: ",t)}else if(t.name.startsWith("hook-"))v[em[t.name.substring(5)]]=ea(t.value,!0);else if(t.name.startsWith("[hook-")&&t.name.endsWith("]"))v[em[t.name.substring(6,t.name.length-1)]]=ea(t.value,!0);else if(t.name.startsWith("signal-"))l["signal_"+u(t.name.substring(7))]=t.value||"stream => void";else if(t.name.startsWith("(on-")&&t.name.endsWith("-changed)")){let e=u(t.name.substring(4,t.name.length-9)),i=el("newValue","oldValue")(t.value,!0);d["on_"+e+"Changed"]=i}else if(t.name.startsWith("(on-dbus-")){let e=u(t.name.substring(9,t.name.length-1)),i=el("$val","$val1","$val2","$val3","$val4","$val5","$val6","$val7","$val8","$val9")(t.value,!0);d["on_dbus_"+e]=i}else if(t.name.startsWith("(on-")){let e=u(t.name.substring(4,t.name.length-1)),i=el("$val","$val1","$val2","$val3","$val4","$val5","$val6","$val7","$val8","$val9")(t.value,!0);d["on_"+e]=i}else if(t.name.startsWith("(")){let e=t.name.substring(1,t.name.length-1),i=el("evt")(t.value,!0);_["h_"+e]=i}else if(t.name.startsWith("let-raw")||t.name.startsWith("set-raw-"))a[u(t.name.substring(8))]=t.value;else if(t.name.startsWith("[let-raw")||t.name.startsWith("[set-raw-"))a[u(t.name.substring(9,t.name.length-1))]=ea(t.value,!0);else if(t.name.startsWith("let-")||t.name.startsWith("set-"))a["let_"+u(t.name.substring(4))]=t.value;else if(t.name.startsWith("[let-")||t.name.startsWith("[set-"))a["let_"+u(t.name.substring(5,t.name.length-1))]=ea(t.value,!0);else if(t.name.startsWith("[ha-")){let e=t.name.substring(4,t.name.length-1);e.includes("-")&&(e=e.split(".").map(e=>e.split("-").map((e,t)=>0===t?e:e.charAt(0).toUpperCase()+e.substring(1)).join("")).join("."));let i=ea(t.value,!0);m["ha_"+e]=i}else if(t.name.startsWith("ha-"))c["ha_"+u(t.name.substring(3))]=t.value;else if(t.name.startsWith("[")){let e=t.name.substring(1,t.name.length-1),i=ea(t.value,!0);p["a_"+e]=i}else h["a_"+t.name]=t.value;let b={...g,...h,...p,...c,...m,..._,...v,...a,...l,...d,...f?{meta:f}:{},...C,...void 0!==s&&s in i?i[s]:{}},E=Array.from(e.childNodes).flatMap(e=>e_(e,t,i,n)).filter(e=>void 0!==e);if(r.startsWith("use-")){if(r.substring(4).toLowerCase() in t)return w(t[r.substring(4).toLowerCase()],{...b},{...y},E);if(eH.has(r))return eH.get(r)({...b},{...y},...E)}else if(r.startsWith("extended-")){if(r.substring(9).toLowerCase() in t)return P(t[r.substring(9).toLowerCase()],{...b},{...y},E);if(eH.has(r))return eH.get(r)({...b},{...y},...E)}else if(r.startsWith("component-")&&eH.has(r))return eH.get(r)({...b},...E);return{[r]:{...b,"=>":E}}}}},ef=(e,t={},i={},n={},s={params:{},state:{},DepsInj:{},u:{}})=>{let r=new DOMParser,o=r.parseFromString(e,"text/html").body,a={};if(0===o.childNodes.length)throw Error("No html found");{i=Object.fromEntries(Object.entries(i).map(([e,t])=>[e.toLowerCase(),t]));let e=Array.from(o.childNodes).flatMap(e=>e_(e,i,n,s)).filter(e=>void 0!==e);if(1===e.length){let i=Object.keys(e[0])[0];a={[i]:{...t,...e[0][i]}}}else a={multi:{...t,"=>":e}}}return a},ev=(async function(){}).constructor,eg=(e,t)=>void 0!==t&&""!==t&&e.toUpperCase().includes("</"+t.toUpperCase()+">")?2:1,eC=(e,t,i="view")=>{var n,s,r;let o=RegExp("\\s*<"+i+(""!==t?" "+t:"")+">([\\s\\S]*?)<\\/"+i+">","gi"),a=RegExp("\\s*<style"+(""!==t?" "+t:"")+">([\\s\\S]*?)<\\/style>","gi"),l=RegExp("\\s*<script"+(""!==t?" "+t:"")+">([\\s\\S]*?)<\\/script>","gi");return{viewContent:null===(n=o.exec(e))||void 0===n?void 0:n[1],styleContent:null===(s=a.exec(e))||void 0===s?void 0:s[1],defContent:null===(r=l.exec(e))||void 0===r?void 0:r[1]}},ey=(e,t)=>{var i;let n=RegExp("\\s*<"+t+"\\b[^>]*>([\\s\\S]*?)<\\/"+t+">","gi"),s=null===(i=n.exec(e))||void 0===i?void 0:i[1];return{...eC(s,"",s.includes("<_>")?"_":s.includes("<template>")?"template":"view")}},eb=async(e,{component:t="",params:i={},state:n={},DepsInj:s={},externalDef:o}={})=>{let a={localComponent:(t,{params:i={},state:n={},DepsInj:s={},externalDef:r}={})=>eb(e,{component:t,params:i,state:n,DepsInj:s,externalDef:r}),localComponents:async t=>{let i={};for(let[n,s]of Object.entries(t))i[n]=await eb(e,{component:n,...null!=s?s:{}});return i}},l=eg(e,t),{viewContent:d,styleContent:h,defContent:p}=1===l?eC(e,t):ey(e,t),c={},u=1===l?{}:{autostyle:r.REMOTE_HTML_V2_AUTOSTYLE};if(p||o){p&&!p.includes("return")&&(p="return ( "+p+" )");let e=o||new ev("Cle","params","state","style","DepsInj","u",p);if(void 0!==h){let e=h;h=Object.assign(e,{setup:(t={})=>{let i=e;return Object.entries(t).forEach(([e,t])=>{i=i.replaceAll(e,t)}),i}})}let t=await e(eP,i,n,h,s,a);void 0!==t&&(Array.isArray(t)?(c=t[0],t.length>=2&&(u={...u,...t[1]})):c=t)}if(!d)throw Error("No View Found");return void 0!==h&&!0===u.autostyle&&void 0===c.css&&(void 0!==h.setup?c.css=[$=>h.setup("cssVars"in $.this?$.this.cssVars:{})]:c.css=[h]),ef(d,c,u.deps,u.extraDefs,{params:i,state:n,DepsInj:s,u:a})},eE=new Map,e$=async(e,{component:t="",params:i={},state:n={},DepsInj:s={},autoExtension:r=!0,cache:o=!0,externalDef:a}={})=>{r&&(e+=e.endsWith(".html")?"":".html");try{let r;if(o&&eE.has(e))r=eE.get(e);else{let t=await fetch(e);if(!t.ok)throw console.log(t),Error("REMOTE HTML REF ERROR");r=await t.text(),o&&eE.set(e,r)}return eb(r,{component:t,params:i,state:n,DepsInj:s,externalDef:a})}catch(e){throw Error("REMOTE HTML REF ERROR: "+e)}},eO=async(e,...t)=>{let i={};for(let n of t)i["string"==typeof n?{component:n}:n]=await e$(e);return i},ex=async(e,{component:t="",params:i={},state:n={},DepsInj:s={},def:r}={})=>await eb(e,{component:t,params:i,state:n,DepsInj:s,externalDef:r}),eR=(e,{component:t,isRemote:i=!0,autoExtension:n=!0,cache:s=!0,def:r,defArgMapper:o=async(e={},t={},i={})=>({params:e,state:t,DepsInj:i})})=>async(a={},l={},d={})=>{var h,p,c,u,m,_;let f=await o(a,l,d);return i?e$(e,{component:t,params:null!==(h=f.params)&&void 0!==h?h:a,state:null!==(p=f.state)&&void 0!==p?p:l,DepsInj:null!==(c=f.DepsInj)&&void 0!==c?c:d,autoExtension:n,cache:s,externalDef:r}):eb(e,{component:t,params:null!==(u=f.params)&&void 0!==u?u:a,state:null!==(m=f.state)&&void 0!==m?m:l,DepsInj:null!==(_=f.DepsInj)&&void 0!==_?_:d,externalDef:r})},eA=async(e={})=>{let t=Object.entries(e).map(([e,t])=>({name:e,depImporterPromise:t instanceof Promise?t:t[0],postProcessing:t instanceof Promise?e=>e:t[1]}));return Object.fromEntries((await Promise.all(t.map(e=>e.depImporterPromise))).map((e,i)=>[t[i].name,t[i].postProcessing(e)]))},ew=async(e={})=>{let t=Object.entries(e).map(([e,t])=>({name:e,depImporterPromise:t instanceof Promise?t:t[0],postProcessing:t instanceof Promise?e=>e:t[1]})),i=Object.fromEntries((await Promise.all(t.map(e=>e.depImporterPromise))).map((e,i)=>[t[i].name,t[i].postProcessing(e)]));return void 0===window.globalCleImports?window.globalCleImports=i:window.globalCleImports={...window.globalCleImports,...i}},eH=new class{define(e,t=r.COMPONENT_REGISTRY_BASE_HTML_EL,i=!1){let n=k(e),s=e[n],o={[null!=t?t:n]:s},a=n.toLowerCase();if(!i&&void 0!==this.components["component_"+a])throw Error("Components Registry - Redefiniton Error");this.components["component_"+a]=this.components["component-"+a]=(e={},...i)=>{if(void 0===e||"object"!=typeof s)return o;{let r={},o={},a=T(s);null!==a&&(r={[a]:[...s[a],...i]});let l=T(e);return null!==l&&(o={[l]:[...e[l],...i]}),{[null!=t?t:n]:{...s,...r,...e,...o}}}},this.components["use_"+a]=this.components["use-"+a]=(e,t,...i)=>w(o,e,t,i),this.components["extended_"+a]=this.components["extended-"+a]=(e,t,...i)=>P(o,e,t,i)}has(e){return e.toLowerCase() in this.components}get(e){return this.components[e.toLowerCase()]}remove(e){let t=e.toLowerCase();delete this.components["component_"+t],delete this.components["component-"+t],delete this.components["use_"+t],delete this.components["use-"+t],delete this.components["extended_"+t],delete this.components["extended-"+t]}reset(){this.components={}}constructor(){this.components={}}},eP={CLE_FLAGS:r,pass:d,none:h,smart:(e,t={})=>Object.entries(e).map(([e,i])=>({[e]:{text:i,...t}}))[0],f:ea,fArgs:el,asFunc:e=>$=>e.bind(void 0,$),Use:w,Extended:P,Placeholder:D,Bind:G,Alias:(e=()=>{},t=()=>{},i=()=>{},n,s,r)=>new g(e,t,i,n,s,r),SmartAlias:C,PropertyBinding:C,DefineSubprops:y,ExternalProp:(e,t)=>new x(e,h,t||h,h,h,h,h,!0),useExternal:E,BindToProp:e=>new S(e),Switch:(...e)=>e,Case:(e,t)=>{let i=k(t),{meta:n,...s}=t[i];return{[i]:{meta:{if:e},...s}}},LazyComponent:(e,t,i={},n,s=(e,t)=>e!==t)=>void 0===n?{LazyPointer:{...i,renderizedComponent:void 0,afterInit:async $=>{let i=e;"function"==typeof e&&(i=await e($,t)),$.renderizedComponent=$.u.newConnectedSubRenderer($.this.el,i,!1,"after")}}}:{LazyPointer:{...i,renderizedComponent:void 0,inRendering:!1,rerenderingDeps:n,on_this_rerenderingDepsChanged:($,e,t)=>{s(e,t)&&void 0!==$.renderizedComponent&&!$.inRendering&&($.renderizedComponent.destroy(),$.renderize())},def_renderize:async $=>{o.log("renderizing.."),$.inRendering=!0;let i=e;"function"==typeof e&&(i=await e($,t)),$.renderizedComponent=$.u.newConnectedSubRenderer($.this.el,i,!1,"after"),o.log("renderized",$.renderizedComponent),$.inRendering=!1},afterInit:async $=>{await $.renderize()}}},UseShadow:(e,t={},i=!0,n=[],s="div",r=!1)=>({[s]:{...t,renderizedComponent:void 0,shadowRoot:void 0,afterInit:async $=>{$.shadowRoot=$.this.el.attachShadow({mode:r?"open":"closed"}),$.renderizedComponent=$.u.newConnectedSubRenderer($.shadowRoot,i?w(e,...n):e)},onDestroy:$=>{$.renderizedComponent.destroy()}}}),RenderApp:q,toInlineStyle:c,LE_LoadScript:(e,{do_microwait:t,attr:i={},scriptDestructor:n=()=>{},debug:s=!1}={})=>(es(),new Promise(function(r,o){if(void 0!==window._Caged_LE_Loaded[e]){s&&a.log("js already loaded!"),void 0!==t?setTimeout(()=>{r(window._Caged_LE_Loaded[e])},t):r(window._Caged_LE_Loaded[e]);return}let l=document.createElement("script");l.onload=i=>{window._Caged_LE_Loaded[e]=l,l.LE_removeScript=()=>{window._Caged_LE_Loaded[e].remove(),n(),delete window._Caged_LE_Loaded[e]},s&&a.log("resolved!",i),void 0!==t?setTimeout(()=>{r(window._Caged_LE_Loaded[e])},t):r(window._Caged_LE_Loaded[e])},l.onerror=o,l.setAttribute("src",e),Object.keys(i).map(e=>l.setAttribute(e,i)),document.head.appendChild(l)})),LE_LoadCss:er,LE_InitWebApp:eo,LE_BackendApiMock:class{response(e){return new Promise((t,i)=>{setTimeout(()=>t(JSON.parse(JSON.stringify(e))),this.apiSpeed)})}failResponse(e){return new Promise((t,i)=>{setTimeout(()=>i(JSON.parse(JSON.stringify(e))),this.apiSpeed)})}request(e){if(void 0!==e)return JSON.parse(JSON.stringify(e))}get(e,t){return this.response(this.services[e](this.request(t)))}post(e,t){return this.response(this.services[e](this.request(t)))}put(e,t){return this.response(this.services[e](this.request(t)))}constructor(e=100){this.services={},this.apiSpeed=e}},cle:ed,str:eh,str_:ep,input:ec,output:(e,t="stream => void")=>({["s_"+e]:t}),ExtendSCSS:j,clsIf:eu,html:ef,remoteHtmlComponent:e$,remoteHtmlComponents:eO,fromHtmlComponentDef:ex,defineHtmlComponent:eR,defineHtmlComponents:(e,...t)=>Object.fromEntries(t.map(t=>[t.component,eR(e,t)])),importAll:eA,globalImportAll:ew,ComponentsRegistry:eH}}),s.register("OHGR1",function(t,i){e(t.exports,"_",function(){return n});function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}});